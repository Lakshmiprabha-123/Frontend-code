{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { StatusEnum } from '../enum';\nlet AddStatusComponent = class AddStatusComponent {\n  constructor(projectService, router, route) {\n    this.projectService = projectService;\n    this.router = router;\n    this.route = route;\n    this.teamCompositionLabels = [\"QA Engineers\", \"Frontend Developers\", \"Scrum Master\", \"Backend Developers\", \"Technical Lead\", \"Marketing and Sales\", \"Stakeholders\", \"UI/UX Designers\", \"DevOps Engineers\", \"BA\"];\n    this.statusEnum = StatusEnum; // Enum reference for template binding\n    this.status = {\n      id: 0,\n      risksInDelivery: false,\n      teamComposition: {},\n      processFlows: StatusEnum.NOT_YET,\n      defectsReport: false,\n      numberOfDefects: 0,\n      dailyUpdates: StatusEnum.NOT_YET,\n      qaUpdates: StatusEnum.NOT_YET,\n      sonarqube: StatusEnum.NOT_YET,\n      weeklyReports: StatusEnum.NOT_YET,\n      closeClientCommunication: StatusEnum.NOT_YET,\n      gitReport: StatusEnum.NOT_YET,\n      escalation: StatusEnum.NOT_YET,\n      boardUpdates: StatusEnum.NOT_YET\n    };\n    this.projectId = 0;\n    this.teamCompositionString = '';\n    this.projects = [];\n    this.isUpdateMode = false;\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      if (params['projectId']) {\n        this.projectId = +params['projectId'];\n        this.checkCurrentStatus();\n      }\n    });\n    this.route.url.subscribe(url => {\n      if (url.some(segment => segment.path === 'update-status')) {\n        this.isUpdateMode = true;\n        this.loadStatus();\n      }\n    });\n  }\n  checkCurrentStatus() {\n    this.projectService.getCurrentStatus(this.projectId).subscribe(response => {\n      if (response.status === 'Not Yet Started') {\n        this.isUpdateMode = false;\n        this.resetForm(); // Reset the form for a fresh status\n      } else {\n        this.isUpdateMode = true;\n        this.loadStatus(); // Load the existing status for update\n      }\n    });\n  }\n\n  loadStatus() {\n    this.projectService.getStatus(this.projectId).subscribe(fullStatus => {\n      this.status = fullStatus;\n      this.teamCompositionString = JSON.stringify(this.status.teamComposition); // Convert the team composition back to JSON string for display\n    });\n  }\n\n  onTeamCompositionChange(label, event) {\n    const inputElement = event.target;\n    this.status.teamComposition[label] = Number(inputElement.value);\n    this.teamCompositionString = JSON.stringify(this.status.teamComposition);\n  }\n  onSubmit() {\n    try {\n      // Check if the JSON string is not empty\n      if (this.teamCompositionString.trim()) {\n        this.status.teamComposition = JSON.parse(this.teamCompositionString);\n      } else {\n        throw new Error('Team composition JSON string is empty');\n      }\n      if (this.isUpdateMode) {\n        this.projectService.updateStatus(this.projectId, this.status).subscribe(response => {\n          console.log('Status updated:', response);\n        });\n      } else {\n        this.projectService.saveStatus(this.projectId, this.status).subscribe(response => {\n          console.log('Status added:', response);\n        });\n      }\n    } catch (e) {\n      console.error('Invalid JSON for team composition', e);\n    }\n  }\n  resetForm() {\n    this.status = {\n      id: 0,\n      risksInDelivery: false,\n      teamComposition: {},\n      processFlows: StatusEnum.NOT_YET,\n      defectsReport: false,\n      numberOfDefects: 0,\n      dailyUpdates: StatusEnum.NOT_YET,\n      qaUpdates: StatusEnum.NOT_YET,\n      sonarqube: StatusEnum.NOT_YET,\n      weeklyReports: StatusEnum.NOT_YET,\n      closeClientCommunication: StatusEnum.NOT_YET,\n      gitReport: StatusEnum.NOT_YET,\n      escalation: StatusEnum.NOT_YET,\n      boardUpdates: StatusEnum.NOT_YET\n    };\n    this.teamCompositionString = '';\n  }\n  goBack() {\n    this.router.navigate(['/all-projects']); // Adjust the route to your \"Project List\" page\n  }\n};\n\nAddStatusComponent = __decorate([Component({\n  selector: 'app-add-status',\n  templateUrl: './add-status.component.html',\n  styleUrls: ['./add-status.component.css']\n})], AddStatusComponent);\nexport { AddStatusComponent };","map":{"version":3,"mappings":"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","names":["Component","StatusEnum","AddStatusComponent","constructor","projectService","router","route","id","risksInDelivery","teamComposition","processFlows","NOT_YET","defectsReport","numberOfDefects","dailyUpdates","qaUpdates","sonarqube","weeklyReports","closeClientCommunication","gitReport","escalation","boardUpdates","ngOnInit","params","subscribe","projectId","checkCurrentStatus","url","some","segment","path","isUpdateMode","loadStatus","getCurrentStatus","response","status","resetForm","getStatus","fullStatus","teamCompositionString","JSON","stringify","onTeamCompositionChange","label","event","inputElement","target","Number","value","onSubmit","trim","parse","Error","updateStatus","console","log","saveStatus","e","error","goBack","navigate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/decodersmdu/pocone/src/app/add-status/add-status.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { StatusEnum } from '../enum'\nimport { Status } from '../Models/status.model'\nimport { ProjectService } from '../Services/project.service'\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Project } from '../Models/project.model';\n\n@Component({\n  selector: 'app-add-status',\n  templateUrl: './add-status.component.html',\n  styleUrls: ['./add-status.component.css']\n})\nexport class AddStatusComponent implements OnInit {\n  teamCompositionLabels = [\n    \"QA Engineers\", \n    \"Frontend Developers\", \n    \"Scrum Master\", \n    \"Backend Developers\", \n    \"Technical Lead\", \n    \"Marketing and Sales\", \n    \"Stakeholders\", \n    \"UI/UX Designers\", \n    \"DevOps Engineers\", \n    \"BA\"\n  ];\n  statusEnum = StatusEnum;  // Enum reference for template binding\n\n  status: Status = {\n    id:0,\n    risksInDelivery: false,\n    teamComposition: {},\n    processFlows: StatusEnum.NOT_YET,\n    defectsReport: false,\n    numberOfDefects: 0,\n    dailyUpdates: StatusEnum.NOT_YET,\n    qaUpdates: StatusEnum.NOT_YET,\n    sonarqube: StatusEnum.NOT_YET,\n    weeklyReports: StatusEnum.NOT_YET,\n    closeClientCommunication: StatusEnum.NOT_YET,\n    gitReport: StatusEnum.NOT_YET,\n    escalation: StatusEnum.NOT_YET,\n    boardUpdates: StatusEnum.NOT_YET\n  };\n  projectId: number = 0;\n  teamCompositionString: string = '';\n  projects: Project[] =[];\n  isUpdateMode: boolean = false;\n  \n \n  constructor(private projectService: ProjectService, private router: Router, private route: ActivatedRoute) {}\n\n  ngOnInit(): void {\n    this.route.params.subscribe(params => {\n      if (params['projectId']) {\n        this.projectId = +params['projectId'];\n        this.checkCurrentStatus();\n      }\n    });\n  \n    this.route.url.subscribe(url => {\n      if (url.some(segment => segment.path === 'update-status')) {\n        this.isUpdateMode = true;\n        this.loadStatus();\n      }\n    });\n  }\n  checkCurrentStatus(): void {\n    this.projectService.getCurrentStatus(this.projectId).subscribe(response => {\n      if (response.status === 'Not Yet Started') {\n        this.isUpdateMode = false;\n        this.resetForm(); // Reset the form for a fresh status\n      } else {\n        this.isUpdateMode = true;\n        this.loadStatus(); // Load the existing status for update\n      }\n    });\n  }\n  loadStatus(): void {\n    this.projectService.getStatus(this.projectId).subscribe(fullStatus => {\n      this.status = fullStatus;\n      this.teamCompositionString = JSON.stringify(this.status.teamComposition); // Convert the team composition back to JSON string for display\n    });\n  }\n  onTeamCompositionChange(label: string, event: Event): void{\n    const inputElement = event.target as HTMLInputElement;\n    this.status.teamComposition[label] = Number(inputElement.value);\n    this.teamCompositionString = JSON.stringify(this.status.teamComposition); \n  }\n  \n  \n\nonSubmit() {\n  try {\n    // Check if the JSON string is not empty\n    if (this.teamCompositionString.trim()) {\n      this.status.teamComposition = JSON.parse(this.teamCompositionString);\n    } else {\n      throw new Error('Team composition JSON string is empty');\n    }\n\n    if (this.isUpdateMode) {\n      this.projectService.updateStatus(this.projectId, this.status).subscribe(response => {\n        console.log('Status updated:', response);\n        \n      });\n    } else {\n      this.projectService.saveStatus(this.projectId, this.status).subscribe(response => {\n        console.log('Status added:', response);\n        \n      });\n    }\n  } catch (e) {\n    console.error('Invalid JSON for team composition', e);\n  }\n}\n \nresetForm(): void {\n  this.status = {\n    id: 0,\n    risksInDelivery: false,\n    teamComposition: {},\n    processFlows: StatusEnum.NOT_YET,\n    defectsReport: false,\n    numberOfDefects: 0,\n    dailyUpdates: StatusEnum.NOT_YET,\n    qaUpdates: StatusEnum.NOT_YET,\n    sonarqube: StatusEnum.NOT_YET,\n    weeklyReports: StatusEnum.NOT_YET,\n    closeClientCommunication: StatusEnum.NOT_YET,\n    gitReport: StatusEnum.NOT_YET,\n    escalation: StatusEnum.NOT_YET,\n    boardUpdates: StatusEnum.NOT_YET\n  };\n  this.teamCompositionString = '';\n}\ngoBack() {\n  this.router.navigate(['/all-projects']); // Adjust the route to your \"Project List\" page\n}\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}