{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet MonthlyStatusComponent = class MonthlyStatusComponent {\n  constructor(projectService) {\n    this.projectService = projectService;\n    this.projects = [];\n    this.selectedProjectId = null;\n    this.selectedMonth = '';\n    this.lineChartData = [];\n    this.lineChartLabels = [];\n    this.lineChartOptions = {\n      responsive: true,\n      scales: {\n        xAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Date'\n          },\n          ticks: {\n            autoSkip: true,\n            maxRotation: 45\n          }\n        }],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Status'\n          }\n        }]\n      }\n    };\n    this.lineChartLegend = true;\n    this.lineChartType = 'line';\n    this.lineChartColors = [{\n      borderColor: '#42A5F5',\n      backgroundColor: 'rgba(66, 165, 245, 0.3)'\n    }];\n  }\n  ngOnInit() {\n    this.loadProjects();\n  }\n  loadProjects() {\n    this.projectService.getProjects().subscribe(projects => {\n      this.projects = projects;\n    });\n  }\n  onProjectSelect(event) {\n    this.selectedProjectId = event.target.value;\n    this.fetchStatusHistory();\n  }\n  onMonthSelect(event) {\n    this.selectedMonth = event.target.value;\n    this.fetchStatusHistory();\n  }\n  fetchStatusHistory() {\n    if (this.selectedProjectId && this.selectedMonth) {\n      this.projectService.getStatusHistory(this.selectedProjectId, this.selectedMonth).subscribe(statusHistory => {\n        this.updateChart(statusHistory);\n      });\n    }\n  }\n  updateChart(statusHistory) {\n    this.lineChartLabels = statusHistory.map(status => status.date);\n    this.lineChartData = [{\n      data: statusHistory.map(status => status.currentStatus),\n      label: 'Current Status'\n    }];\n  }\n};\nMonthlyStatusComponent = __decorate([Component({\n  selector: 'app-monthly-status',\n  templateUrl: './monthly-status.component.html',\n  styleUrls: ['./monthly-status.component.css']\n})], MonthlyStatusComponent);\nexport { MonthlyStatusComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAU1C,IAAMC,sBAAsB,GAA5B,MAAMA,sBAAsB;EAyBjCC,YAAoBC,cAA8B;IAA9B,mBAAc,GAAdA,cAAc;IAxBlC,aAAQ,GAAU,EAAE;IACpB,sBAAiB,GAAkB,IAAI;IACvC,kBAAa,GAAW,EAAE;IAE1B,kBAAa,GAAoB,EAAE;IACnC,oBAAe,GAAY,EAAE;IAC7B,qBAAgB,GAAiB;MAC/BC,UAAU,EAAE,IAAI;MAChBC,MAAM,EAAE;QACNC,KAAK,EAAE,CAAC;UACNC,UAAU,EAAE;YAAEC,OAAO,EAAE,IAAI;YAAEC,WAAW,EAAE;UAAM,CAAE;UAClDC,KAAK,EAAE;YAAEC,QAAQ,EAAE,IAAI;YAAEC,WAAW,EAAE;UAAE;SACzC,CAAC;QACFC,KAAK,EAAE,CAAC;UACNN,UAAU,EAAE;YAAEC,OAAO,EAAE,IAAI;YAAEC,WAAW,EAAE;UAAQ;SACnD;;KAEJ;IACD,oBAAe,GAAG,IAAI;IACtB,kBAAa,GAAc,MAAM;IACjC,oBAAe,GAAY,CACzB;MAAEK,WAAW,EAAE,SAAS;MAAEC,eAAe,EAAE;IAAyB,CAAE,CACvE;EAEqD;EAEtDC,QAAQ;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAA,YAAY;IACV,IAAI,CAACd,cAAc,CAACe,WAAW,EAAE,CAACC,SAAS,CAACC,QAAQ,IAAG;MACrD,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IAC1B,CAAC,CAAC;EACJ;EAEAC,eAAe,CAACC,KAAU;IACxB,IAAI,CAACC,iBAAiB,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK;IAC3C,IAAI,CAACC,kBAAkB,EAAE;EAC3B;EAEAC,aAAa,CAACL,KAAU;IACtB,IAAI,CAACM,aAAa,GAAGN,KAAK,CAACE,MAAM,CAACC,KAAK;IACvC,IAAI,CAACC,kBAAkB,EAAE;EAC3B;EAEAA,kBAAkB;IAChB,IAAI,IAAI,CAACH,iBAAiB,IAAI,IAAI,CAACK,aAAa,EAAE;MAChD,IAAI,CAACzB,cAAc,CAAC0B,gBAAgB,CAAC,IAAI,CAACN,iBAAiB,EAAE,IAAI,CAACK,aAAa,CAAC,CAACT,SAAS,CAACW,aAAa,IAAG;QACzG,IAAI,CAACC,WAAW,CAACD,aAAa,CAAC;MACjC,CAAC,CAAC;;EAEN;EAEAC,WAAW,CAACD,aAAoB;IAC9B,IAAI,CAACE,eAAe,GAAGF,aAAa,CAACG,GAAG,CAACC,MAAM,IAAIA,MAAM,CAACC,IAAI,CAAC;IAC/D,IAAI,CAACC,aAAa,GAAG,CACnB;MACEC,IAAI,EAAEP,aAAa,CAACG,GAAG,CAACC,MAAM,IAAIA,MAAM,CAACI,aAAa,CAAC;MACvDC,KAAK,EAAE;KACR,CACF;EACH;CACD;AAhEYtC,sBAAsB,eALlCD,SAAS,CAAC;EACTwC,QAAQ,EAAE,oBAAoB;EAC9BC,WAAW,EAAE,iCAAiC;EAC9CC,SAAS,EAAE,CAAC,gCAAgC;CAC7C,CAAC,GACWzC,sBAAsB,CAgElC;SAhEYA,sBAAsB","names":["Component","MonthlyStatusComponent","constructor","projectService","responsive","scales","xAxes","scaleLabel","display","labelString","ticks","autoSkip","maxRotation","yAxes","borderColor","backgroundColor","ngOnInit","loadProjects","getProjects","subscribe","projects","onProjectSelect","event","selectedProjectId","target","value","fetchStatusHistory","onMonthSelect","selectedMonth","getStatusHistory","statusHistory","updateChart","lineChartLabels","map","status","date","lineChartData","data","currentStatus","label","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/decodersmdu/pocone/src/app/monthly-status/monthly-status.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ProjectService } from '../project.service'; // Update the path if necessary\nimport { ChartDataSets, ChartOptions, ChartType } from 'chart.js';\nimport { Color, Label } from 'ng2-charts';\n\n@Component({\n  selector: 'app-monthly-status',\n  templateUrl: './monthly-status.component.html',\n  styleUrls: ['./monthly-status.component.css']\n})\nexport class MonthlyStatusComponent implements OnInit {\n  projects: any[] = [];\n  selectedProjectId: number | null = null;\n  selectedMonth: string = '';\n  \n  lineChartData: ChartDataSets[] = [];\n  lineChartLabels: Label[] = [];\n  lineChartOptions: ChartOptions = {\n    responsive: true,\n    scales: {\n      xAxes: [{ \n        scaleLabel: { display: true, labelString: 'Date' },\n        ticks: { autoSkip: true, maxRotation: 45 }\n      }],\n      yAxes: [{ \n        scaleLabel: { display: true, labelString: 'Status' }\n      }]\n    }\n  };\n  lineChartLegend = true;\n  lineChartType: ChartType = 'line';\n  lineChartColors: Color[] = [\n    { borderColor: '#42A5F5', backgroundColor: 'rgba(66, 165, 245, 0.3)' }\n  ];\n\n  constructor(private projectService: ProjectService) { }\n\n  ngOnInit(): void {\n    this.loadProjects();\n  }\n\n  loadProjects(): void {\n    this.projectService.getProjects().subscribe(projects => {\n      this.projects = projects;\n    });\n  }\n\n  onProjectSelect(event: any): void {\n    this.selectedProjectId = event.target.value;\n    this.fetchStatusHistory();\n  }\n\n  onMonthSelect(event: any): void {\n    this.selectedMonth = event.target.value;\n    this.fetchStatusHistory();\n  }\n\n  fetchStatusHistory(): void {\n    if (this.selectedProjectId && this.selectedMonth) {\n      this.projectService.getStatusHistory(this.selectedProjectId, this.selectedMonth).subscribe(statusHistory => {\n        this.updateChart(statusHistory);\n      });\n    }\n  }\n\n  updateChart(statusHistory: any[]): void {\n    this.lineChartLabels = statusHistory.map(status => status.date);\n    this.lineChartData = [\n      {\n        data: statusHistory.map(status => status.currentStatus),\n        label: 'Current Status'\n      }\n    ];\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}