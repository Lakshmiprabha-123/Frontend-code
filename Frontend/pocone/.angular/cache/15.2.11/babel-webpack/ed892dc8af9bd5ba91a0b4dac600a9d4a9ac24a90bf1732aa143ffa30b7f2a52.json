{"ast":null,"code":"import { Injectable, ɵɵdefineInjectable, EventEmitter, Directive, ElementRef, Input, Output, NgModule } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { cloneDeep } from 'lodash-es';\nimport { pluginService, Chart as Chart$1 } from 'chart.js';\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/default-colors.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n/** @type {?} */\nimport * as ɵngcc0 from '@angular/core';\nconst defaultColors = [[255, 99, 132], [54, 162, 235], [255, 206, 86], [231, 233, 237], [75, 192, 192], [151, 187, 205], [220, 220, 220], [247, 70, 74], [70, 191, 189], [253, 180, 92], [148, 159, 177], [77, 83, 96]];\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/get-colors.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n/**\r\n * Generate colors by chart type\r\n * @param {?} chartType\r\n * @param {?} index\r\n * @param {?} count\r\n * @return {?}\r\n */\nfunction getColors(chartType, index, count) {\n  if (chartType === 'pie' || chartType === 'doughnut') {\n    return formatPieColors(generateColors(count));\n  }\n  if (chartType === 'polarArea') {\n    return formatPolarAreaColors(generateColors(count));\n  }\n  if (chartType === 'line' || chartType === 'radar') {\n    return formatLineColor(generateColor(index));\n  }\n  if (chartType === 'bar' || chartType === 'horizontalBar') {\n    return formatBarColor(generateColor(index));\n  }\n  if (chartType === 'bubble') {\n    return formatPieColors(generateColors(count));\n  }\n  if (chartType === 'scatter') {\n    return formatPieColors(generateColors(count));\n  }\n  throw new Error(`getColors - Unsupported chart type ${chartType}`);\n}\n/**\r\n * @param {?} colour\r\n * @param {?} alpha\r\n * @return {?}\r\n */\nfunction rgba(colour, alpha) {\n  return 'rgba(' + colour.concat(alpha).join(',') + ')';\n}\n/**\r\n * @param {?} min\r\n * @param {?} max\r\n * @return {?}\r\n */\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n/**\r\n * @param {?} colors\r\n * @return {?}\r\n */\nfunction formatLineColor(colors) {\n  return {\n    backgroundColor: rgba(colors, 0.4),\n    borderColor: rgba(colors, 1),\n    pointBackgroundColor: rgba(colors, 1),\n    pointBorderColor: '#fff',\n    pointHoverBackgroundColor: '#fff',\n    pointHoverBorderColor: rgba(colors, 0.8)\n  };\n}\n/**\r\n * @param {?} colors\r\n * @return {?}\r\n */\nfunction formatBarColor(colors) {\n  return {\n    backgroundColor: rgba(colors, 0.6),\n    borderColor: rgba(colors, 1),\n    hoverBackgroundColor: rgba(colors, 0.8),\n    hoverBorderColor: rgba(colors, 1)\n  };\n}\n/**\r\n * @param {?} colors\r\n * @return {?}\r\n */\nfunction formatPieColors(colors) {\n  return {\n    backgroundColor: colors.map(\n    /**\r\n    * @param {?} color\r\n    * @return {?}\r\n    */\n    color => rgba(color, 0.6)),\n    borderColor: colors.map(\n    /**\r\n    * @return {?}\r\n    */\n    () => '#fff'),\n    pointBackgroundColor: colors.map(\n    /**\r\n    * @param {?} color\r\n    * @return {?}\r\n    */\n    color => rgba(color, 1)),\n    pointBorderColor: colors.map(\n    /**\r\n    * @return {?}\r\n    */\n    () => '#fff'),\n    pointHoverBackgroundColor: colors.map(\n    /**\r\n    * @param {?} color\r\n    * @return {?}\r\n    */\n    color => rgba(color, 1)),\n    pointHoverBorderColor: colors.map(\n    /**\r\n    * @param {?} color\r\n    * @return {?}\r\n    */\n    color => rgba(color, 1))\n  };\n}\n/**\r\n * @param {?} colors\r\n * @return {?}\r\n */\nfunction formatPolarAreaColors(colors) {\n  return {\n    backgroundColor: colors.map(\n    /**\r\n    * @param {?} color\r\n    * @return {?}\r\n    */\n    color => rgba(color, 0.6)),\n    borderColor: colors.map(\n    /**\r\n    * @param {?} color\r\n    * @return {?}\r\n    */\n    color => rgba(color, 1)),\n    hoverBackgroundColor: colors.map(\n    /**\r\n    * @param {?} color\r\n    * @return {?}\r\n    */\n    color => rgba(color, 0.8)),\n    hoverBorderColor: colors.map(\n    /**\r\n    * @param {?} color\r\n    * @return {?}\r\n    */\n    color => rgba(color, 1))\n  };\n}\n/**\r\n * @return {?}\r\n */\nfunction getRandomColor() {\n  return [getRandomInt(0, 255), getRandomInt(0, 255), getRandomInt(0, 255)];\n}\n/**\r\n * Generate colors for line|bar charts\r\n * @param {?} index\r\n * @return {?}\r\n */\nfunction generateColor(index) {\n  return defaultColors[index] || getRandomColor();\n}\n/**\r\n * Generate colors for pie|doughnut charts\r\n * @param {?} count\r\n * @return {?}\r\n */\nfunction generateColors(count) {\n  /** @type {?} */\n  const colorsArr = new Array(count);\n  for (let i = 0; i < count; i++) {\n    colorsArr[i] = defaultColors[i] || getRandomColor();\n  }\n  return colorsArr;\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/theme.service.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\nclass ThemeService {\n  constructor() {\n    this.pColorschemesOptions = {};\n    this.colorschemesOptions = new BehaviorSubject({});\n  }\n  /**\r\n   * @param {?} options\r\n   * @return {?}\r\n   */\n  setColorschemesOptions(options) {\n    this.pColorschemesOptions = options;\n    this.colorschemesOptions.next(options);\n  }\n  /**\r\n   * @return {?}\r\n   */\n  getColorschemesOptions() {\n    return this.pColorschemesOptions;\n  }\n}\nThemeService.ɵfac = function ThemeService_Factory(t) {\n  return new (t || ThemeService)();\n};\n/** @nocollapse */\nThemeService.ctorParameters = () => [];\n/** @nocollapse */\nThemeService.ɵprov = ɵɵdefineInjectable({\n  factory: function ThemeService_Factory() {\n    return new ThemeService();\n  },\n  token: ThemeService,\n  providedIn: \"root\"\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ThemeService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\nif (false) {\n  /**\r\n   * @type {?}\r\n   * @private\r\n   */\n  ThemeService.prototype.pColorschemesOptions;\n  /** @type {?} */\n  ThemeService.prototype.colorschemesOptions;\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/base-chart.directive.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n/**\r\n * @record\r\n */\nfunction OldState() {}\nif (false) {\n  /** @type {?} */\n  OldState.prototype.dataExists;\n  /** @type {?} */\n  OldState.prototype.dataLength;\n  /** @type {?} */\n  OldState.prototype.datasetsExists;\n  /** @type {?} */\n  OldState.prototype.datasetsLength;\n  /** @type {?} */\n  OldState.prototype.datasetsDataObjects;\n  /** @type {?} */\n  OldState.prototype.datasetsDataLengths;\n  /** @type {?} */\n  OldState.prototype.colorsExists;\n  /** @type {?} */\n  OldState.prototype.colors;\n  /** @type {?} */\n  OldState.prototype.labelsExist;\n  /** @type {?} */\n  OldState.prototype.labels;\n  /** @type {?} */\n  OldState.prototype.legendExists;\n  /** @type {?} */\n  OldState.prototype.legend;\n}\n/** @enum {number} */\nconst UpdateType = {\n  Default: 0,\n  Update: 1,\n  Refresh: 2\n};\nUpdateType[UpdateType.Default] = 'Default';\nUpdateType[UpdateType.Update] = 'Update';\nUpdateType[UpdateType.Refresh] = 'Refresh';\nclass BaseChartDirective {\n  /**\r\n   * @param {?} element\r\n   * @param {?} themeService\r\n   */\n  constructor(element, themeService) {\n    this.element = element;\n    this.themeService = themeService;\n    this.options = {};\n    this.chartClick = new EventEmitter();\n    this.chartHover = new EventEmitter();\n    this.old = {\n      dataExists: false,\n      dataLength: 0,\n      datasetsExists: false,\n      datasetsLength: 0,\n      datasetsDataObjects: [],\n      datasetsDataLengths: [],\n      colorsExists: false,\n      colors: [],\n      labelsExist: false,\n      labels: [],\n      legendExists: false,\n      legend: {}\n    };\n    this.subs = [];\n  }\n  /**\r\n   * Register a plugin.\r\n   * @param {?} plugin\r\n   * @return {?}\r\n   */\n  static registerPlugin(plugin) {\n    pluginService.register(plugin);\n  }\n  /**\r\n   * @param {?} plugin\r\n   * @return {?}\r\n   */\n  static unregisterPlugin(plugin) {\n    pluginService.unregister(plugin);\n  }\n  /**\r\n   * @return {?}\r\n   */\n  ngOnInit() {\n    this.ctx = this.element.nativeElement.getContext('2d');\n    this.refresh();\n    this.subs.push(this.themeService.colorschemesOptions.subscribe(\n    /**\r\n    * @param {?} r\r\n    * @return {?}\r\n    */\n    r => this.themeChanged(r)));\n  }\n  /**\r\n   * @private\r\n   * @param {?} options\r\n   * @return {?}\r\n   */\n  themeChanged(options) {\n    this.refresh();\n  }\n  /**\r\n   * @return {?}\r\n   */\n  ngDoCheck() {\n    if (!this.chart) {\n      return;\n    }\n    /** @type {?} */\n    let updateRequired = UpdateType.Default;\n    /** @type {?} */\n    const wantUpdate =\n    /**\r\n    * @param {?} x\r\n    * @return {?}\r\n    */\n    x => {\n      updateRequired = x > updateRequired ? x : updateRequired;\n    };\n    if (!!this.data !== this.old.dataExists) {\n      this.propagateDataToDatasets(this.data);\n      this.old.dataExists = !!this.data;\n      wantUpdate(UpdateType.Update);\n    }\n    if (this.data && this.data.length !== this.old.dataLength) {\n      this.old.dataLength = this.data && this.data.length || 0;\n      wantUpdate(UpdateType.Update);\n    }\n    if (!!this.datasets !== this.old.datasetsExists) {\n      this.old.datasetsExists = !!this.datasets;\n      wantUpdate(UpdateType.Update);\n    }\n    if (this.datasets && this.datasets.length !== this.old.datasetsLength) {\n      this.old.datasetsLength = this.datasets && this.datasets.length || 0;\n      wantUpdate(UpdateType.Update);\n    }\n    if (this.datasets && this.datasets.filter(\n    /**\r\n    * @param {?} x\r\n    * @param {?} i\r\n    * @return {?}\r\n    */\n    (x, i) => x.data !== this.old.datasetsDataObjects[i]).length) {\n      this.old.datasetsDataObjects = this.datasets.map(\n      /**\r\n      * @param {?} x\r\n      * @return {?}\r\n      */\n      x => x.data);\n      wantUpdate(UpdateType.Update);\n    }\n    if (this.datasets && this.datasets.filter(\n    /**\r\n    * @param {?} x\r\n    * @param {?} i\r\n    * @return {?}\r\n    */\n    (x, i) => x.data.length !== this.old.datasetsDataLengths[i]).length) {\n      this.old.datasetsDataLengths = this.datasets.map(\n      /**\r\n      * @param {?} x\r\n      * @return {?}\r\n      */\n      x => x.data.length);\n      wantUpdate(UpdateType.Update);\n    }\n    if (!!this.colors !== this.old.colorsExists) {\n      this.old.colorsExists = !!this.colors;\n      this.updateColors();\n      wantUpdate(UpdateType.Update);\n    }\n    // This smells of inefficiency, might need to revisit this\n    if (this.colors && this.colors.filter(\n    /**\r\n    * @param {?} x\r\n    * @param {?} i\r\n    * @return {?}\r\n    */\n    (x, i) => !this.colorsEqual(x, this.old.colors[i])).length) {\n      this.old.colors = this.colors.map(\n      /**\r\n      * @param {?} x\r\n      * @return {?}\r\n      */\n      x => this.copyColor(x));\n      this.updateColors();\n      wantUpdate(UpdateType.Update);\n    }\n    if (!!this.labels !== this.old.labelsExist) {\n      this.old.labelsExist = !!this.labels;\n      wantUpdate(UpdateType.Update);\n    }\n    if (this.labels && this.labels.filter(\n    /**\r\n    * @param {?} x\r\n    * @param {?} i\r\n    * @return {?}\r\n    */\n    (x, i) => !this.labelsEqual(x, this.old.labels[i])).length) {\n      this.old.labels = this.labels.map(\n      /**\r\n      * @param {?} x\r\n      * @return {?}\r\n      */\n      x => this.copyLabel(x));\n      wantUpdate(UpdateType.Update);\n    }\n    if (!!this.options.legend !== this.old.legendExists) {\n      this.old.legendExists = !!this.options.legend;\n      wantUpdate(UpdateType.Refresh);\n    }\n    if (this.options.legend && this.options.legend.position !== this.old.legend.position) {\n      this.old.legend.position = this.options.legend.position;\n      wantUpdate(UpdateType.Refresh);\n    }\n    switch ( /** @type {?} */updateRequired) {\n      case UpdateType.Default:\n        break;\n      case UpdateType.Update:\n        this.update();\n        break;\n      case UpdateType.Refresh:\n        this.refresh();\n        break;\n    }\n  }\n  /**\r\n   * @param {?} a\r\n   * @return {?}\r\n   */\n  copyLabel(a) {\n    if (Array.isArray(a)) {\n      return [...a];\n    }\n    return a;\n  }\n  /**\r\n   * @param {?} a\r\n   * @param {?} b\r\n   * @return {?}\r\n   */\n  labelsEqual(a, b) {\n    return Array.isArray(a) === Array.isArray(b) && (Array.isArray(a) || a === b) && (!Array.isArray(a) || a.length === b.length) && (!Array.isArray(a) || a.filter(\n    /**\r\n    * @param {?} x\r\n    * @param {?} i\r\n    * @return {?}\r\n    */\n    (x, i) => x !== b[i]).length === 0);\n  }\n  /**\r\n   * @param {?} a\r\n   * @return {?}\r\n   */\n  copyColor(a) {\n    return {\n      backgroundColor: a.backgroundColor,\n      borderWidth: a.borderWidth,\n      borderColor: a.borderColor,\n      borderCapStyle: a.borderCapStyle,\n      borderDash: a.borderDash,\n      borderDashOffset: a.borderDashOffset,\n      borderJoinStyle: a.borderJoinStyle,\n      pointBorderColor: a.pointBorderColor,\n      pointBackgroundColor: a.pointBackgroundColor,\n      pointBorderWidth: a.pointBorderWidth,\n      pointRadius: a.pointRadius,\n      pointHoverRadius: a.pointHoverRadius,\n      pointHitRadius: a.pointHitRadius,\n      pointHoverBackgroundColor: a.pointHoverBackgroundColor,\n      pointHoverBorderColor: a.pointHoverBorderColor,\n      pointHoverBorderWidth: a.pointHoverBorderWidth,\n      pointStyle: a.pointStyle,\n      hoverBackgroundColor: a.hoverBackgroundColor,\n      hoverBorderColor: a.hoverBorderColor,\n      hoverBorderWidth: a.hoverBorderWidth\n    };\n  }\n  /**\r\n   * @param {?} a\r\n   * @param {?} b\r\n   * @return {?}\r\n   */\n  colorsEqual(a, b) {\n    if (!a !== !b) {\n      return false;\n    }\n    return !a || a.backgroundColor === b.backgroundColor && a.borderWidth === b.borderWidth && a.borderColor === b.borderColor && a.borderCapStyle === b.borderCapStyle && a.borderDash === b.borderDash && a.borderDashOffset === b.borderDashOffset && a.borderJoinStyle === b.borderJoinStyle && a.pointBorderColor === b.pointBorderColor && a.pointBackgroundColor === b.pointBackgroundColor && a.pointBorderWidth === b.pointBorderWidth && a.pointRadius === b.pointRadius && a.pointHoverRadius === b.pointHoverRadius && a.pointHitRadius === b.pointHitRadius && a.pointHoverBackgroundColor === b.pointHoverBackgroundColor && a.pointHoverBorderColor === b.pointHoverBorderColor && a.pointHoverBorderWidth === b.pointHoverBorderWidth && a.pointStyle === b.pointStyle && a.hoverBackgroundColor === b.hoverBackgroundColor && a.hoverBorderColor === b.hoverBorderColor && a.hoverBorderWidth === b.hoverBorderWidth;\n  }\n  /**\r\n   * @return {?}\r\n   */\n  updateColors() {\n    this.datasets.forEach(\n    /**\r\n    * @param {?} elm\r\n    * @param {?} index\r\n    * @return {?}\r\n    */\n    (elm, index) => {\n      if (this.colors && this.colors[index]) {\n        Object.assign(elm, this.colors[index]);\n      } else {\n        Object.assign(elm, getColors(this.chartType, index, elm.data.length), Object.assign({}, elm));\n      }\n    });\n  }\n  /**\r\n   * @param {?} changes\r\n   * @return {?}\r\n   */\n  ngOnChanges(changes) {\n    /** @type {?} */\n    let updateRequired = UpdateType.Default;\n    /** @type {?} */\n    const wantUpdate =\n    /**\r\n    * @param {?} x\r\n    * @return {?}\r\n    */\n    x => {\n      updateRequired = x > updateRequired ? x : updateRequired;\n    };\n    // Check if the changes are in the data or datasets or labels or legend\n    if (changes.hasOwnProperty('data') && changes.data.currentValue) {\n      this.propagateDataToDatasets(changes.data.currentValue);\n      wantUpdate(UpdateType.Update);\n    }\n    if (changes.hasOwnProperty('datasets') && changes.datasets.currentValue) {\n      this.propagateDatasetsToData(changes.datasets.currentValue);\n      wantUpdate(UpdateType.Update);\n    }\n    if (changes.hasOwnProperty('labels')) {\n      if (this.chart) {\n        this.chart.data.labels = changes.labels.currentValue;\n      }\n      wantUpdate(UpdateType.Update);\n    }\n    if (changes.hasOwnProperty('legend')) {\n      if (this.chart) {\n        this.chart.config.options.legend.display = changes.legend.currentValue;\n        this.chart.generateLegend();\n      }\n      wantUpdate(UpdateType.Update);\n    }\n    if (changes.hasOwnProperty('options')) {\n      wantUpdate(UpdateType.Refresh);\n    }\n    switch ( /** @type {?} */updateRequired) {\n      case UpdateType.Update:\n        this.update();\n        break;\n      case UpdateType.Refresh:\n      case UpdateType.Default:\n        this.refresh();\n        break;\n    }\n  }\n  /**\r\n   * @return {?}\r\n   */\n  ngOnDestroy() {\n    if (this.chart) {\n      this.chart.destroy();\n      this.chart = void 0;\n    }\n    this.subs.forEach(\n    /**\r\n    * @param {?} x\r\n    * @return {?}\r\n    */\n    x => x.unsubscribe());\n  }\n  /**\r\n   * @param {?=} duration\r\n   * @return {?}\r\n   */\n  update(duration) {\n    if (this.chart) {\n      return this.chart.update(duration);\n    }\n  }\n  /**\r\n   * @param {?} index\r\n   * @param {?} hidden\r\n   * @return {?}\r\n   */\n  hideDataset(index, hidden) {\n    this.chart.getDatasetMeta(index).hidden = hidden;\n    this.chart.update();\n  }\n  /**\r\n   * @param {?} index\r\n   * @return {?}\r\n   */\n  isDatasetHidden(index) {\n    return this.chart.getDatasetMeta(index).hidden;\n  }\n  /**\r\n   * @return {?}\r\n   */\n  toBase64Image() {\n    return this.chart.toBase64Image();\n  }\n  /**\r\n   * @return {?}\r\n   */\n  getChartConfiguration() {\n    /** @type {?} */\n    const datasets = this.getDatasets();\n    /** @type {?} */\n    const options = Object.assign({}, this.options);\n    if (this.legend === false) {\n      options.legend = {\n        display: false\n      };\n    }\n    // hook for onHover and onClick events\n    options.hover = options.hover || {};\n    if (!options.hover.onHover) {\n      options.hover.onHover =\n      /**\r\n      * @param {?} event\r\n      * @param {?} active\r\n      * @return {?}\r\n      */\n      (event, active) => {\n        if (active && !active.length) {\n          return;\n        }\n        this.chartHover.emit({\n          event,\n          active\n        });\n      };\n    }\n    if (!options.onClick) {\n      options.onClick =\n      /**\r\n      * @param {?=} event\r\n      * @param {?=} active\r\n      * @return {?}\r\n      */\n      (event, active) => {\n        this.chartClick.emit({\n          event,\n          active\n        });\n      };\n    }\n    /** @type {?} */\n    const mergedOptions = this.smartMerge(options, this.themeService.getColorschemesOptions());\n    return {\n      type: this.chartType,\n      data: {\n        labels: this.labels || [],\n        datasets\n      },\n      plugins: this.plugins,\n      options: mergedOptions\n    };\n  }\n  /**\r\n   * @param {?} ctx\r\n   * @return {?}\r\n   */\n  getChartBuilder(ctx /*, data:any[], options:any*/) {\n    /** @type {?} */\n    const chartConfig = this.getChartConfiguration();\n    return new Chart$1(ctx, chartConfig);\n  }\n  /**\r\n   * @param {?} options\r\n   * @param {?} overrides\r\n   * @param {?=} level\r\n   * @return {?}\r\n   */\n  smartMerge(options, overrides, level = 0) {\n    if (level === 0) {\n      options = cloneDeep(options);\n    }\n    /** @type {?} */\n    const keysToUpdate = Object.keys(overrides);\n    keysToUpdate.forEach(\n    /**\r\n    * @param {?} key\r\n    * @return {?}\r\n    */\n    key => {\n      if (Array.isArray(overrides[key])) {\n        /** @type {?} */\n        const arrayElements = options[key];\n        if (arrayElements) {\n          arrayElements.forEach(\n          /**\r\n          * @param {?} r\r\n          * @return {?}\r\n          */\n          r => {\n            this.smartMerge(r, overrides[key][0], level + 1);\n          });\n        }\n      } else if (typeof overrides[key] === 'object') {\n        if (!(key in options)) {\n          options[key] = {};\n        }\n        this.smartMerge(options[key], overrides[key], level + 1);\n      } else {\n        options[key] = overrides[key];\n      }\n    });\n    if (level === 0) {\n      return options;\n    }\n  }\n  /**\r\n   * @private\r\n   * @param {?} label\r\n   * @return {?}\r\n   */\n  isMultiLineLabel(label) {\n    return Array.isArray(label);\n  }\n  /**\r\n   * @private\r\n   * @param {?} label\r\n   * @return {?}\r\n   */\n  joinLabel(label) {\n    if (!label) {\n      return null;\n    }\n    if (this.isMultiLineLabel(label)) {\n      return label.join(' ');\n    } else {\n      return label;\n    }\n  }\n  /**\r\n   * @private\r\n   * @param {?} datasets\r\n   * @return {?}\r\n   */\n  propagateDatasetsToData(datasets) {\n    this.data = this.datasets.map(\n    /**\r\n    * @param {?} r\r\n    * @return {?}\r\n    */\n    r => r.data);\n    if (this.chart) {\n      this.chart.data.datasets = datasets;\n    }\n    this.updateColors();\n  }\n  /**\r\n   * @private\r\n   * @param {?} newDataValues\r\n   * @return {?}\r\n   */\n  propagateDataToDatasets(newDataValues) {\n    if (this.isMultiDataSet(newDataValues)) {\n      if (this.datasets && newDataValues.length === this.datasets.length) {\n        this.datasets.forEach(\n        /**\r\n        * @param {?} dataset\r\n        * @param {?} i\r\n        * @return {?}\r\n        */\n        (dataset, i) => {\n          dataset.data = newDataValues[i];\n        });\n      } else {\n        this.datasets = newDataValues.map(\n        /**\r\n        * @param {?} data\r\n        * @param {?} index\r\n        * @return {?}\r\n        */\n        (data, index) => {\n          return {\n            data,\n            label: this.joinLabel(this.labels[index]) || `Label ${index}`\n          };\n        });\n        if (this.chart) {\n          this.chart.data.datasets = this.datasets;\n        }\n      }\n    } else {\n      if (!this.datasets) {\n        this.datasets = [{\n          data: newDataValues\n        }];\n        if (this.chart) {\n          this.chart.data.datasets = this.datasets;\n        }\n      } else {\n        if (!this.datasets[0]) {\n          this.datasets[0] = {};\n        }\n        this.datasets[0].data = newDataValues;\n        this.datasets.splice(1); // Remove all elements but the first\n      }\n    }\n\n    this.updateColors();\n  }\n  /**\r\n   * @private\r\n   * @param {?} data\r\n   * @return {?}\r\n   */\n  isMultiDataSet(data) {\n    return Array.isArray(data[0]);\n  }\n  /**\r\n   * @private\r\n   * @return {?}\r\n   */\n  getDatasets() {\n    if (!this.datasets && !this.data) {\n      throw new Error(`ng-charts configuration error, data or datasets field are required to render chart ${this.chartType}`);\n    }\n    // If `datasets` is defined, use it over the `data` property.\n    if (this.datasets) {\n      this.propagateDatasetsToData(this.datasets);\n      return this.datasets;\n    }\n    if (this.data) {\n      this.propagateDataToDatasets(this.data);\n      return this.datasets;\n    }\n  }\n  /**\r\n   * @private\r\n   * @return {?}\r\n   */\n  refresh() {\n    // if (this.options && this.options.responsive) {\n    //   setTimeout(() => this.refresh(), 50);\n    // }\n    // todo: remove this line, it is producing flickering\n    if (this.chart) {\n      this.chart.destroy();\n      this.chart = void 0;\n    }\n    if (this.ctx) {\n      this.chart = this.getChartBuilder(this.ctx /*, data, this.options*/);\n    }\n  }\n}\n\nBaseChartDirective.ɵfac = function BaseChartDirective_Factory(t) {\n  return new (t || BaseChartDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ThemeService));\n};\nBaseChartDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: BaseChartDirective,\n  selectors: [[\"canvas\", \"baseChart\", \"\"]],\n  inputs: {\n    options: \"options\",\n    data: \"data\",\n    datasets: \"datasets\",\n    labels: \"labels\",\n    chartType: \"chartType\",\n    colors: \"colors\",\n    legend: \"legend\",\n    plugins: \"plugins\"\n  },\n  outputs: {\n    chartClick: \"chartClick\",\n    chartHover: \"chartHover\"\n  },\n  exportAs: [\"base-chart\"],\n  features: [ɵngcc0.ɵɵNgOnChangesFeature]\n});\n/** @nocollapse */\nBaseChartDirective.ctorParameters = () => [{\n  type: ElementRef\n}, {\n  type: ThemeService\n}];\nBaseChartDirective.propDecorators = {\n  data: [{\n    type: Input\n  }],\n  datasets: [{\n    type: Input\n  }],\n  labels: [{\n    type: Input\n  }],\n  options: [{\n    type: Input\n  }],\n  chartType: [{\n    type: Input\n  }],\n  colors: [{\n    type: Input\n  }],\n  legend: [{\n    type: Input\n  }],\n  plugins: [{\n    type: Input\n  }],\n  chartClick: [{\n    type: Output\n  }],\n  chartHover: [{\n    type: Output\n  }]\n};\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BaseChartDirective, [{\n    type: Directive,\n    args: [{\n      // tslint:disable-next-line:directive-selector\n      selector: 'canvas[baseChart]',\n      exportAs: 'base-chart'\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.ElementRef\n    }, {\n      type: ThemeService\n    }];\n  }, {\n    options: [{\n      type: Input\n    }],\n    chartClick: [{\n      type: Output\n    }],\n    chartHover: [{\n      type: Output\n    }],\n    data: [{\n      type: Input\n    }],\n    datasets: [{\n      type: Input\n    }],\n    labels: [{\n      type: Input\n    }],\n    chartType: [{\n      type: Input\n    }],\n    colors: [{\n      type: Input\n    }],\n    legend: [{\n      type: Input\n    }],\n    plugins: [{\n      type: Input\n    }]\n  });\n})();\nif (false) {\n  /** @type {?} */\n  BaseChartDirective.prototype.data;\n  /** @type {?} */\n  BaseChartDirective.prototype.datasets;\n  /** @type {?} */\n  BaseChartDirective.prototype.labels;\n  /** @type {?} */\n  BaseChartDirective.prototype.options;\n  /** @type {?} */\n  BaseChartDirective.prototype.chartType;\n  /** @type {?} */\n  BaseChartDirective.prototype.colors;\n  /** @type {?} */\n  BaseChartDirective.prototype.legend;\n  /** @type {?} */\n  BaseChartDirective.prototype.plugins;\n  /** @type {?} */\n  BaseChartDirective.prototype.chartClick;\n  /** @type {?} */\n  BaseChartDirective.prototype.chartHover;\n  /** @type {?} */\n  BaseChartDirective.prototype.ctx;\n  /** @type {?} */\n  BaseChartDirective.prototype.chart;\n  /**\r\n   * @type {?}\r\n   * @private\r\n   */\n  BaseChartDirective.prototype.old;\n  /**\r\n   * @type {?}\r\n   * @private\r\n   */\n  BaseChartDirective.prototype.subs;\n  /**\r\n   * @type {?}\r\n   * @private\r\n   */\n  BaseChartDirective.prototype.element;\n  /**\r\n   * @type {?}\r\n   * @private\r\n   */\n  BaseChartDirective.prototype.themeService;\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/charts.module.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\nclass ChartsModule {}\nChartsModule.ɵfac = function ChartsModule_Factory(t) {\n  return new (t || ChartsModule)();\n};\nChartsModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n  type: ChartsModule\n});\nChartsModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ChartsModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [BaseChartDirective],\n      imports: [],\n      exports: [BaseChartDirective]\n    }]\n  }], null, null);\n})();\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ChartsModule, {\n    declarations: [BaseChartDirective],\n    exports: [BaseChartDirective]\n  });\n})();\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/color.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n/**\r\n * @record\r\n */\nfunction Color() {}\nif (false) {\n  /** @type {?|undefined} */\n  Color.prototype.backgroundColor;\n  /** @type {?|undefined} */\n  Color.prototype.borderWidth;\n  /** @type {?|undefined} */\n  Color.prototype.borderColor;\n  /** @type {?|undefined} */\n  Color.prototype.borderCapStyle;\n  /** @type {?|undefined} */\n  Color.prototype.borderDash;\n  /** @type {?|undefined} */\n  Color.prototype.borderDashOffset;\n  /** @type {?|undefined} */\n  Color.prototype.borderJoinStyle;\n  /** @type {?|undefined} */\n  Color.prototype.pointBorderColor;\n  /** @type {?|undefined} */\n  Color.prototype.pointBackgroundColor;\n  /** @type {?|undefined} */\n  Color.prototype.pointBorderWidth;\n  /** @type {?|undefined} */\n  Color.prototype.pointRadius;\n  /** @type {?|undefined} */\n  Color.prototype.pointHoverRadius;\n  /** @type {?|undefined} */\n  Color.prototype.pointHitRadius;\n  /** @type {?|undefined} */\n  Color.prototype.pointHoverBackgroundColor;\n  /** @type {?|undefined} */\n  Color.prototype.pointHoverBorderColor;\n  /** @type {?|undefined} */\n  Color.prototype.pointHoverBorderWidth;\n  /** @type {?|undefined} */\n  Color.prototype.pointStyle;\n  /** @type {?|undefined} */\n  Color.prototype.hoverBackgroundColor;\n  /** @type {?|undefined} */\n  Color.prototype.hoverBorderColor;\n  /** @type {?|undefined} */\n  Color.prototype.hoverBorderWidth;\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/colors.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n/**\r\n * @record\r\n */\nfunction Colors() {}\nif (false) {\n  /** @type {?|undefined} */\n  Colors.prototype.data;\n  /** @type {?|undefined} */\n  Colors.prototype.label;\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/monkey-patch-chart-js-legend.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n// tslint:disable:variable-name\n// tslint:disable:no-var-keyword\n// tslint:disable:prefer-const\n// tslint:disable:only-arrow-functions\n// tslint:disable:one-variable-per-declaration\n// tslint:disable:object-literal-shorthand\n// tslint:disable:space-before-function-paren\n/**\r\n * @return {?}\r\n */\nfunction monkeyPatchChartJsLegend() {\n  if (typeof Chart === 'undefined') {\n    console.log('Chart not defined (guessing this is a universal build, and I don\\'t know why this happens -- Aviad)');\n    return;\n  }\n  /** @type {?} */\n  const plugins = Chart.plugins.getAll();\n  /** @type {?} */\n  const legend = plugins.filter(\n  /**\r\n  * @param {?} p\r\n  * @return {?}\r\n  */\n  p => p.id === 'legend')[0];\n  legend._element.prototype.fit = fit;\n  legend._element.prototype.draw = draw;\n  /** @type {?} */\n  const helpers = Chart.helpers;\n  /** @type {?} */\n  const defaults = Chart.defaults;\n  /** @type {?} */\n  const valueOrDefault = helpers.valueOrDefault;\n  /**\r\n   * @param {?} labelOpts\r\n   * @param {?} fontSize\r\n   * @return {?}\r\n   */\n  function getBoxWidth(labelOpts, fontSize) {\n    return labelOpts.usePointStyle && labelOpts.boxWidth > fontSize ? fontSize : labelOpts.boxWidth;\n  }\n  /**\r\n   * @return {?}\r\n   */\n  function fit() {\n    /** @type {?} */\n    var me = this;\n    /** @type {?} */\n    var opts = me.options;\n    /** @type {?} */\n    var labelOpts = opts.labels;\n    /** @type {?} */\n    var display = opts.display;\n    /** @type {?} */\n    var ctx = me.ctx;\n    /** @type {?} */\n    var labelFont = helpers.options._parseFont(labelOpts);\n    /** @type {?} */\n    var fontSize = labelFont.size;\n    // Reset hit boxes\n    /** @type {?} */\n    var hitboxes = me.legendHitBoxes = [];\n    /** @type {?} */\n    var minSize = me.minSize;\n    /** @type {?} */\n    var isHorizontal = me.isHorizontal();\n    if (isHorizontal) {\n      minSize.width = me.maxWidth; // fill all the width\n      minSize.height = display ? 10 : 0;\n    } else {\n      minSize.width = display ? 10 : 0;\n      minSize.height = me.maxHeight; // fill all the height\n    }\n    /** @type {?} */\n    var getMaxLineWidth =\n    /**\r\n    * @param {?} textLines\r\n    * @return {?}\r\n    */\n    function (textLines) {\n      return textLines.map(\n      /**\r\n      * @param {?} textLine\r\n      * @return {?}\r\n      */\n      function (textLine) {\n        return ctx.measureText(textLine).width;\n      }).reduce(\n      /**\r\n      * @param {?} acc\r\n      * @param {?} v\r\n      * @return {?}\r\n      */\n      function (acc, v) {\n        return v > acc ? v : acc;\n      }, 0);\n    };\n    // Increase sizes here\n    if (display) {\n      ctx.font = labelFont.string;\n      if (isHorizontal) {\n        // Labels\n        // Width of each line of legend boxes. Labels wrap onto multiple lines when there are too many to fit on one\n        /** @type {?} */\n        var lineWidths = me.lineWidths = [0];\n        /** @type {?} */\n        var lineHeights = me.lineHeights = [];\n        /** @type {?} */\n        var currentLineHeight = 0;\n        /** @type {?} */\n        var lineIndex = 0;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'top';\n        helpers.each(me.legendItems,\n        /**\r\n        * @param {?} legendItem\r\n        * @param {?} i\r\n        * @return {?}\r\n        */\n        function (legendItem, i) {\n          /** @type {?} */\n          var width;\n          /** @type {?} */\n          var height;\n          if (helpers.isArray(legendItem.text)) {\n            width = getMaxLineWidth(legendItem.text);\n            height = fontSize * legendItem.text.length + labelOpts.padding;\n          } else {\n            width = ctx.measureText(legendItem.text).width;\n            height = fontSize + labelOpts.padding;\n          }\n          width += getBoxWidth(labelOpts, fontSize) + fontSize / 2;\n          if (lineWidths[lineWidths.length - 1] + width + 2 * labelOpts.padding > minSize.width) {\n            lineHeights.push(currentLineHeight);\n            currentLineHeight = 0;\n            lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\n            lineIndex++;\n          }\n          legendItem.lineOrColumnIndex = lineIndex;\n          if (height > currentLineHeight) {\n            currentLineHeight = height;\n          }\n          // Store the hitbox width and height here. Final position will be updated in `draw`\n          hitboxes[i] = {\n            left: 0,\n            top: 0,\n            width: width,\n            height: height\n          };\n          lineWidths[lineWidths.length - 1] += width + labelOpts.padding;\n        });\n        lineHeights.push(currentLineHeight);\n        minSize.height += lineHeights.reduce(\n        /**\r\n        * @param {?} acc\r\n        * @param {?} v\r\n        * @return {?}\r\n        */\n        function (acc, v) {\n          return acc + v;\n        }, 0);\n      } else {\n        /** @type {?} */\n        var vPadding = labelOpts.padding;\n        /** @type {?} */\n        var columnWidths = me.columnWidths = [];\n        /** @type {?} */\n        var columnHeights = me.columnHeights = [];\n        /** @type {?} */\n        var totalWidth = labelOpts.padding;\n        /** @type {?} */\n        var currentColWidth = 0;\n        /** @type {?} */\n        var currentColHeight = 0;\n        /** @type {?} */\n        var columnIndex = 0;\n        helpers.each(me.legendItems,\n        /**\r\n        * @param {?} legendItem\r\n        * @param {?} i\r\n        * @return {?}\r\n        */\n        function (legendItem, i) {\n          /** @type {?} */\n          var itemWidth;\n          /** @type {?} */\n          var height;\n          if (helpers.isArray(legendItem.text)) {\n            itemWidth = getMaxLineWidth(legendItem.text);\n            height = fontSize * legendItem.text.length;\n          } else {\n            itemWidth = ctx.measureText(legendItem.text).width;\n            height = fontSize;\n          }\n          itemWidth += getBoxWidth(labelOpts, fontSize) + fontSize / 2;\n          // If too tall, go to new column\n          if (currentColHeight + fontSize + 2 * vPadding > minSize.height) {\n            totalWidth += currentColWidth + labelOpts.padding;\n            columnWidths.push(currentColWidth); // previous column width\n            columnHeights.push(currentColHeight);\n            currentColWidth = 0;\n            currentColHeight = 0;\n            columnIndex++;\n          }\n          legendItem.lineOrColumnIndex = columnIndex;\n          // Get max width\n          currentColWidth = Math.max(currentColWidth, itemWidth);\n          currentColHeight += height + vPadding;\n          // Store the hitbox width and height here. Final position will be updated in `draw`\n          hitboxes[i] = {\n            left: 0,\n            top: 0,\n            width: itemWidth,\n            height: height\n          };\n        });\n        totalWidth += currentColWidth;\n        columnWidths.push(currentColWidth);\n        columnHeights.push(currentColHeight);\n        minSize.width += totalWidth;\n      }\n    }\n    me.width = minSize.width;\n    me.height = minSize.height;\n  }\n  /**\r\n   * @return {?}\r\n   */\n  function draw() {\n    /** @type {?} */\n    var me = this;\n    /** @type {?} */\n    var opts = me.options;\n    /** @type {?} */\n    var labelOpts = opts.labels;\n    /** @type {?} */\n    var globalDefaults = defaults.global;\n    /** @type {?} */\n    var defaultColor = globalDefaults.defaultColor;\n    /** @type {?} */\n    var lineDefault = globalDefaults.elements.line;\n    /** @type {?} */\n    var legendHeight = me.height;\n    /** @type {?} */\n    var columnHeights = me.columnHeights;\n    /** @type {?} */\n    var columnWidths = me.columnWidths;\n    /** @type {?} */\n    var legendWidth = me.width;\n    /** @type {?} */\n    var lineWidths = me.lineWidths;\n    /** @type {?} */\n    var lineHeights = me.lineHeights;\n    if (opts.display) {\n      /** @type {?} */\n      var ctx = me.ctx;\n      /** @type {?} */\n      var fontColor = valueOrDefault(labelOpts.fontColor, globalDefaults.defaultFontColor);\n      /** @type {?} */\n      var labelFont = helpers.options._parseFont(labelOpts);\n      /** @type {?} */\n      var fontSize = labelFont.size;\n      /** @type {?} */\n      var cursor;\n      // Canvas setup\n      ctx.textAlign = 'left';\n      ctx.textBaseline = 'middle';\n      ctx.lineWidth = 0.5;\n      ctx.strokeStyle = fontColor; // for strikethrough effect\n      ctx.fillStyle = fontColor; // render in correct colour\n      ctx.font = labelFont.string;\n      /** @type {?} */\n      var boxWidth = getBoxWidth(labelOpts, fontSize);\n      /** @type {?} */\n      var hitboxes = me.legendHitBoxes;\n      // current position\n      /** @type {?} */\n      var drawLegendBox =\n      /**\r\n      * @param {?} x\r\n      * @param {?} y\r\n      * @param {?} legendItem\r\n      * @return {?}\r\n      */\n      function (x, y, legendItem) {\n        if (isNaN(boxWidth) || boxWidth <= 0) {\n          return;\n        }\n        // Set the ctx for the box\n        ctx.save();\n        /** @type {?} */\n        var lineWidth = valueOrDefault(legendItem.lineWidth, lineDefault.borderWidth);\n        ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);\n        ctx.lineCap = valueOrDefault(legendItem.lineCap, lineDefault.borderCapStyle);\n        ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, lineDefault.borderDashOffset);\n        ctx.lineJoin = valueOrDefault(legendItem.lineJoin, lineDefault.borderJoinStyle);\n        ctx.lineWidth = lineWidth;\n        ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);\n        if (ctx.setLineDash) {\n          // IE 9 and 10 do not support line dash\n          ctx.setLineDash(valueOrDefault(legendItem.lineDash, lineDefault.borderDash));\n        }\n        if (opts.labels && opts.labels.usePointStyle) {\n          // Recalculate x and y for drawPoint() because its expecting\n          // x and y to be center of figure (instead of top left)\n          /** @type {?} */\n          var radius = boxWidth * Math.SQRT2 / 2;\n          /** @type {?} */\n          var centerX = x + boxWidth / 2;\n          /** @type {?} */\n          var centerY = y + fontSize / 2;\n          // Draw pointStyle as legend symbol\n          helpers.canvas.drawPoint(ctx, legendItem.pointStyle, radius, centerX, centerY);\n        } else {\n          // Draw box as legend symbol\n          if (lineWidth !== 0) {\n            ctx.strokeRect(x, y, boxWidth, fontSize);\n          }\n          ctx.fillRect(x, y, boxWidth, fontSize);\n        }\n        ctx.restore();\n      };\n      /** @type {?} */\n      var drawStrikeThrough =\n      /**\r\n      * @param {?} x\r\n      * @param {?} y\r\n      * @param {?} w\r\n      * @return {?}\r\n      */\n      function (x, y, w) {\n        ctx.beginPath();\n        ctx.lineWidth = 2;\n        ctx.moveTo(x, y);\n        ctx.lineTo(x + w, y);\n        ctx.stroke();\n      };\n      /** @type {?} */\n      var drawCrossOver =\n      /**\r\n      * @param {?} x\r\n      * @param {?} y\r\n      * @param {?} w\r\n      * @param {?} h\r\n      * @return {?}\r\n      */\n      function (x, y, w, h) {\n        ctx.beginPath();\n        ctx.lineWidth = 2;\n        ctx.moveTo(x, y);\n        ctx.lineTo(x + w, y + h);\n        ctx.moveTo(x, y + h);\n        ctx.lineTo(x + w, y);\n        ctx.stroke();\n      };\n      /** @type {?} */\n      var fillText =\n      /**\r\n      * @param {?} x\r\n      * @param {?} y\r\n      * @param {?} legendItem\r\n      * @param {?} textWidth\r\n      * @return {?}\r\n      */\n      function (x, y, legendItem, textWidth) {\n        /** @type {?} */\n        var halfFontSize = fontSize / 2;\n        /** @type {?} */\n        var xLeft = boxWidth + halfFontSize + x;\n        /** @type {?} */\n        var yMiddle = y + halfFontSize;\n        if (helpers.isArray(legendItem.text)) {\n          helpers.each(legendItem.text,\n          /**\r\n          * @param {?} textLine\r\n          * @param {?} index\r\n          * @return {?}\r\n          */\n          function (textLine, index) {\n            /** @type {?} */\n            var lineOffset = index * fontSize;\n            ctx.fillText(textLine, xLeft, yMiddle + lineOffset);\n          });\n        } else {\n          ctx.fillText(legendItem.text, xLeft, yMiddle);\n        }\n        if (legendItem.hidden) {\n          if (helpers.isArray(legendItem.text)) {\n            drawCrossOver(xLeft, yMiddle, textWidth, (legendItem.text.length - 1) * (fontSize - 1));\n          } else {\n            drawStrikeThrough(xLeft, yMiddle, textWidth);\n          }\n        }\n      };\n      /** @type {?} */\n      var alignmentOffset =\n      /**\r\n      * @param {?} dimension\r\n      * @param {?} blockSize\r\n      * @return {?}\r\n      */\n      function (dimension, blockSize) {\n        switch (opts.align) {\n          case 'start':\n            return labelOpts.padding;\n          case 'end':\n            return dimension - blockSize;\n          default:\n            // center\n            return (dimension - blockSize + labelOpts.padding) / 2;\n        }\n      };\n      // Horizontal\n      /** @type {?} */\n      var isHorizontal = me.isHorizontal();\n      if (isHorizontal) {\n        cursor = {\n          x: me.left + alignmentOffset(legendWidth, lineWidths[0]),\n          y: me.top + labelOpts.padding,\n          line: 0\n        };\n      } else {\n        cursor = {\n          x: me.left + labelOpts.padding,\n          y: me.top + alignmentOffset(legendHeight, columnHeights[0]),\n          line: 0\n        };\n      }\n      helpers.each(me.legendItems,\n      /**\r\n      * @param {?} legendItem\r\n      * @param {?} i\r\n      * @return {?}\r\n      */\n      function (legendItem, i) {\n        /** @type {?} */\n        var textWidth;\n        /** @type {?} */\n        var height;\n        /** @type {?} */\n        var boxTopOffset;\n        if (legendItem.lineOrColumnIndex > cursor.line) {\n          if (isHorizontal) {\n            cursor.y += lineHeights[cursor.line];\n            cursor.line = legendItem.lineOrColumnIndex;\n            cursor.x = me.left + alignmentOffset(legendWidth, lineWidths[cursor.line]);\n          } else {\n            cursor.x += columnWidths[cursor.line] + labelOpts.padding;\n            cursor.line = legendItem.lineOrColumnIndex;\n            cursor.y = me.top + alignmentOffset(legendHeight, columnHeights[cursor.line]);\n          }\n        }\n        if (helpers.isArray(legendItem.text)) {\n          textWidth = legendItem.text.map(\n          /**\r\n          * @param {?} textLine\r\n          * @return {?}\r\n          */\n          function (textLine) {\n            return ctx.measureText(textLine).width;\n          }).reduce(\n          /**\r\n          * @param {?} acc\r\n          * @param {?} v\r\n          * @return {?}\r\n          */\n          function (acc, v) {\n            return v > acc ? v : acc;\n          }, 0);\n          boxTopOffset = fontSize / 2 * (legendItem.text.length - 1);\n          height = fontSize * legendItem.text.length;\n        } else {\n          textWidth = ctx.measureText(legendItem.text).width;\n          boxTopOffset = 0;\n          height = fontSize;\n        }\n        /** @type {?} */\n        var width = boxWidth + fontSize / 2 + textWidth;\n        /** @type {?} */\n        var x = cursor.x;\n        /** @type {?} */\n        var y = cursor.y;\n        /** @type {?} */\n        var topOffset = isHorizontal ? Math.trunc((lineHeights[cursor.line] - hitboxes[i].height) / 2) : 0;\n        drawLegendBox(x, y + boxTopOffset + topOffset, legendItem);\n        hitboxes[i].left = x;\n        hitboxes[i].top = y;\n        // Fill the actual label\n        fillText(x, y + topOffset, legendItem, textWidth);\n        if (isHorizontal) {\n          cursor.x += width + labelOpts.padding;\n        } else {\n          cursor.y += height + labelOpts.padding;\n        }\n      });\n    }\n  }\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/monkey-patch-chart-js-tooltip.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n// tslint:disable:variable-name\n// tslint:disable:no-var-keyword\n// tslint:disable:prefer-const\n// tslint:disable:only-arrow-functions\n// tslint:disable:one-variable-per-declaration\n// tslint:disable:object-literal-shorthand\n// tslint:disable:space-before-function-paren\n/**\r\n * @return {?}\r\n */\nfunction monkeyPatchChartJsTooltip() {\n  if (typeof Chart === 'undefined') {\n    console.log('Chart not defined (guessing this is a universal build, and I don\\'t know why this happens -- Aviad)');\n    return;\n  }\n  Chart.Tooltip.prototype.drawBody = drawBody;\n  /** @type {?} */\n  const helpers = Chart.helpers;\n  /**\r\n   * @param {?} vm\r\n   * @param {?} align\r\n   * @return {?}\r\n   */\n  function getAlignedX(vm, align) {\n    return align === 'center' ? vm.x + vm.width / 2 : align === 'right' ? vm.x + vm.width - vm.xPadding : vm.x + vm.xPadding;\n  }\n  /**\r\n   * @param {?} pt\r\n   * @param {?} vm\r\n   * @param {?} ctx\r\n   * @return {?}\r\n   */\n  function drawBody(pt, vm, ctx) {\n    /** @type {?} */\n    var bodyFontSize = vm.bodyFontSize;\n    /** @type {?} */\n    var bodySpacing = vm.bodySpacing;\n    /** @type {?} */\n    var bodyAlign = vm._bodyAlign;\n    /** @type {?} */\n    var body = vm.body;\n    /** @type {?} */\n    var drawColorBoxes = vm.displayColors;\n    /** @type {?} */\n    var labelColors = vm.labelColors;\n    /** @type {?} */\n    var xLinePadding = 0;\n    /** @type {?} */\n    var colorX = drawColorBoxes ? getAlignedX(vm, 'left') : 0;\n    /** @type {?} */\n    var textColor;\n    ctx.textAlign = bodyAlign;\n    ctx.textBaseline = 'top';\n    ctx.font = helpers.fontString(bodyFontSize, vm._bodyFontStyle, vm._bodyFontFamily);\n    pt.x = getAlignedX(vm, bodyAlign);\n    // Before Body\n    /** @type {?} */\n    var fillLineOfText =\n    /**\r\n    * @param {?} line\r\n    * @return {?}\r\n    */\n    function (line) {\n      ctx.fillText(line, pt.x + xLinePadding, pt.y);\n      pt.y += bodyFontSize + bodySpacing;\n    };\n    // Before body lines\n    ctx.fillStyle = vm.bodyFontColor;\n    helpers.each(vm.beforeBody, fillLineOfText);\n    xLinePadding = drawColorBoxes && bodyAlign !== 'right' ? bodyAlign === 'center' ? bodyFontSize / 2 + 1 : bodyFontSize + 2 : 0;\n    // Draw body lines now\n    helpers.each(body,\n    /**\r\n    * @param {?} bodyItem\r\n    * @param {?} i\r\n    * @return {?}\r\n    */\n    function (bodyItem, i) {\n      textColor = vm.labelTextColors[i];\n      ctx.fillStyle = textColor;\n      helpers.each(bodyItem.before, fillLineOfText);\n      // Draw Legend-like boxes if needed\n      if (drawColorBoxes) {\n        // Fill a white rect so that colours merge nicely if the opacity is < 1\n        ctx.fillStyle = vm.legendColorBackground;\n        ctx.fillRect(colorX, pt.y, bodyFontSize, bodyFontSize);\n        // Border\n        ctx.lineWidth = 1;\n        ctx.strokeStyle = labelColors[i].borderColor;\n        ctx.strokeRect(colorX, pt.y, bodyFontSize, bodyFontSize);\n        // Inner square\n        ctx.fillStyle = labelColors[i].backgroundColor;\n        ctx.fillRect(colorX + 1, pt.y + 1, bodyFontSize - 2, bodyFontSize - 2);\n        ctx.fillStyle = textColor;\n      }\n      helpers.each(bodyItem.lines, fillLineOfText);\n      helpers.each(bodyItem.after, fillLineOfText);\n    });\n    // Reset back to 0 for after body\n    xLinePadding = 0;\n    // After body lines\n    helpers.each(vm.afterBody, fillLineOfText);\n    pt.y -= bodySpacing; // Remove last body spacing\n  }\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: public_api.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: ng2-charts.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\nexport { BaseChartDirective, ChartsModule, ThemeService, defaultColors, monkeyPatchChartJsLegend, monkeyPatchChartJsTooltip };","map":{"version":3,"names":["Injectable","ɵɵdefineInjectable","EventEmitter","Directive","ElementRef","Input","Output","NgModule","BehaviorSubject","cloneDeep","pluginService","Chart","Chart$1","ɵngcc0","defaultColors","getColors","chartType","index","count","formatPieColors","generateColors","formatPolarAreaColors","formatLineColor","generateColor","formatBarColor","Error","rgba","colour","alpha","concat","join","getRandomInt","min","max","Math","floor","random","colors","backgroundColor","borderColor","pointBackgroundColor","pointBorderColor","pointHoverBackgroundColor","pointHoverBorderColor","hoverBackgroundColor","hoverBorderColor","map","color","getRandomColor","colorsArr","Array","i","ThemeService","constructor","pColorschemesOptions","colorschemesOptions","setColorschemesOptions","options","next","getColorschemesOptions","ɵfac","ThemeService_Factory","t","ctorParameters","ɵprov","factory","token","providedIn","ngDevMode","ɵsetClassMetadata","type","args","prototype","OldState","dataExists","dataLength","datasetsExists","datasetsLength","datasetsDataObjects","datasetsDataLengths","colorsExists","labelsExist","labels","legendExists","legend","UpdateType","Default","Update","Refresh","BaseChartDirective","element","themeService","chartClick","chartHover","old","subs","registerPlugin","plugin","register","unregisterPlugin","unregister","ngOnInit","ctx","nativeElement","getContext","refresh","push","subscribe","r","themeChanged","ngDoCheck","chart","updateRequired","wantUpdate","x","data","propagateDataToDatasets","length","datasets","filter","updateColors","colorsEqual","copyColor","labelsEqual","copyLabel","position","update","a","isArray","b","borderWidth","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderWidth","pointRadius","pointHoverRadius","pointHitRadius","pointHoverBorderWidth","pointStyle","hoverBorderWidth","forEach","elm","Object","assign","ngOnChanges","changes","hasOwnProperty","currentValue","propagateDatasetsToData","config","display","generateLegend","ngOnDestroy","destroy","unsubscribe","duration","hideDataset","hidden","getDatasetMeta","isDatasetHidden","toBase64Image","getChartConfiguration","getDatasets","hover","onHover","event","active","emit","onClick","mergedOptions","smartMerge","plugins","getChartBuilder","chartConfig","overrides","level","keysToUpdate","keys","key","arrayElements","isMultiLineLabel","label","joinLabel","newDataValues","isMultiDataSet","dataset","splice","BaseChartDirective_Factory","ɵɵdirectiveInject","ɵdir","ɵɵdefineDirective","selectors","inputs","outputs","exportAs","features","ɵɵNgOnChangesFeature","propDecorators","selector","ChartsModule","ChartsModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","declarations","imports","exports","ngJitMode","ɵɵsetNgModuleScope","Color","Colors","monkeyPatchChartJsLegend","console","log","getAll","p","id","_element","fit","draw","helpers","defaults","valueOrDefault","getBoxWidth","labelOpts","fontSize","usePointStyle","boxWidth","me","opts","labelFont","_parseFont","size","hitboxes","legendHitBoxes","minSize","isHorizontal","width","maxWidth","height","maxHeight","getMaxLineWidth","textLines","textLine","measureText","reduce","acc","v","font","string","lineWidths","lineHeights","currentLineHeight","lineIndex","textAlign","textBaseline","each","legendItems","legendItem","text","padding","lineOrColumnIndex","left","top","vPadding","columnWidths","columnHeights","totalWidth","currentColWidth","currentColHeight","columnIndex","itemWidth","globalDefaults","global","defaultColor","lineDefault","elements","line","legendHeight","legendWidth","fontColor","defaultFontColor","cursor","lineWidth","strokeStyle","fillStyle","drawLegendBox","y","isNaN","save","lineCap","lineDashOffset","lineJoin","setLineDash","lineDash","radius","SQRT2","centerX","centerY","canvas","drawPoint","strokeRect","fillRect","restore","drawStrikeThrough","w","beginPath","moveTo","lineTo","stroke","drawCrossOver","h","fillText","textWidth","halfFontSize","xLeft","yMiddle","lineOffset","alignmentOffset","dimension","blockSize","align","boxTopOffset","topOffset","trunc","monkeyPatchChartJsTooltip","Tooltip","drawBody","getAlignedX","vm","xPadding","pt","bodyFontSize","bodySpacing","bodyAlign","_bodyAlign","body","drawColorBoxes","displayColors","labelColors","xLinePadding","colorX","textColor","fontString","_bodyFontStyle","_bodyFontFamily","fillLineOfText","bodyFontColor","beforeBody","bodyItem","labelTextColors","before","legendColorBackground","lines","after","afterBody"],"sources":["/home/decodersmdu/pocone/node_modules/ng2-charts/__ivy_ngcc__/fesm2015/ng2-charts.js"],"sourcesContent":["import { Injectable, ɵɵdefineInjectable, EventEmitter, Directive, ElementRef, Input, Output, NgModule } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { cloneDeep } from 'lodash-es';\nimport { pluginService, Chart as Chart$1 } from 'chart.js';\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/default-colors.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/** @type {?} */\r\nimport * as ɵngcc0 from '@angular/core';\nconst defaultColors = [\r\n    [255, 99, 132],\r\n    [54, 162, 235],\r\n    [255, 206, 86],\r\n    [231, 233, 237],\r\n    [75, 192, 192],\r\n    [151, 187, 205],\r\n    [220, 220, 220],\r\n    [247, 70, 74],\r\n    [70, 191, 189],\r\n    [253, 180, 92],\r\n    [148, 159, 177],\r\n    [77, 83, 96]\r\n];\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/get-colors.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * Generate colors by chart type\r\n * @param {?} chartType\r\n * @param {?} index\r\n * @param {?} count\r\n * @return {?}\r\n */\r\nfunction getColors(chartType, index, count) {\r\n    if (chartType === 'pie' || chartType === 'doughnut') {\r\n        return formatPieColors(generateColors(count));\r\n    }\r\n    if (chartType === 'polarArea') {\r\n        return formatPolarAreaColors(generateColors(count));\r\n    }\r\n    if (chartType === 'line' || chartType === 'radar') {\r\n        return formatLineColor(generateColor(index));\r\n    }\r\n    if (chartType === 'bar' || chartType === 'horizontalBar') {\r\n        return formatBarColor(generateColor(index));\r\n    }\r\n    if (chartType === 'bubble') {\r\n        return formatPieColors(generateColors(count));\r\n    }\r\n    if (chartType === 'scatter') {\r\n        return formatPieColors(generateColors(count));\r\n    }\r\n    throw new Error(`getColors - Unsupported chart type ${chartType}`);\r\n}\r\n/**\r\n * @param {?} colour\r\n * @param {?} alpha\r\n * @return {?}\r\n */\r\nfunction rgba(colour, alpha) {\r\n    return 'rgba(' + colour.concat(alpha).join(',') + ')';\r\n}\r\n/**\r\n * @param {?} min\r\n * @param {?} max\r\n * @return {?}\r\n */\r\nfunction getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n/**\r\n * @param {?} colors\r\n * @return {?}\r\n */\r\nfunction formatLineColor(colors) {\r\n    return {\r\n        backgroundColor: rgba(colors, 0.4),\r\n        borderColor: rgba(colors, 1),\r\n        pointBackgroundColor: rgba(colors, 1),\r\n        pointBorderColor: '#fff',\r\n        pointHoverBackgroundColor: '#fff',\r\n        pointHoverBorderColor: rgba(colors, 0.8)\r\n    };\r\n}\r\n/**\r\n * @param {?} colors\r\n * @return {?}\r\n */\r\nfunction formatBarColor(colors) {\r\n    return {\r\n        backgroundColor: rgba(colors, 0.6),\r\n        borderColor: rgba(colors, 1),\r\n        hoverBackgroundColor: rgba(colors, 0.8),\r\n        hoverBorderColor: rgba(colors, 1)\r\n    };\r\n}\r\n/**\r\n * @param {?} colors\r\n * @return {?}\r\n */\r\nfunction formatPieColors(colors) {\r\n    return {\r\n        backgroundColor: colors.map((/**\r\n         * @param {?} color\r\n         * @return {?}\r\n         */\r\n        (color) => rgba(color, 0.6))),\r\n        borderColor: colors.map((/**\r\n         * @return {?}\r\n         */\r\n        () => '#fff')),\r\n        pointBackgroundColor: colors.map((/**\r\n         * @param {?} color\r\n         * @return {?}\r\n         */\r\n        (color) => rgba(color, 1))),\r\n        pointBorderColor: colors.map((/**\r\n         * @return {?}\r\n         */\r\n        () => '#fff')),\r\n        pointHoverBackgroundColor: colors.map((/**\r\n         * @param {?} color\r\n         * @return {?}\r\n         */\r\n        (color) => rgba(color, 1))),\r\n        pointHoverBorderColor: colors.map((/**\r\n         * @param {?} color\r\n         * @return {?}\r\n         */\r\n        (color) => rgba(color, 1)))\r\n    };\r\n}\r\n/**\r\n * @param {?} colors\r\n * @return {?}\r\n */\r\nfunction formatPolarAreaColors(colors) {\r\n    return {\r\n        backgroundColor: colors.map((/**\r\n         * @param {?} color\r\n         * @return {?}\r\n         */\r\n        (color) => rgba(color, 0.6))),\r\n        borderColor: colors.map((/**\r\n         * @param {?} color\r\n         * @return {?}\r\n         */\r\n        (color) => rgba(color, 1))),\r\n        hoverBackgroundColor: colors.map((/**\r\n         * @param {?} color\r\n         * @return {?}\r\n         */\r\n        (color) => rgba(color, 0.8))),\r\n        hoverBorderColor: colors.map((/**\r\n         * @param {?} color\r\n         * @return {?}\r\n         */\r\n        (color) => rgba(color, 1)))\r\n    };\r\n}\r\n/**\r\n * @return {?}\r\n */\r\nfunction getRandomColor() {\r\n    return [getRandomInt(0, 255), getRandomInt(0, 255), getRandomInt(0, 255)];\r\n}\r\n/**\r\n * Generate colors for line|bar charts\r\n * @param {?} index\r\n * @return {?}\r\n */\r\nfunction generateColor(index) {\r\n    return defaultColors[index] || getRandomColor();\r\n}\r\n/**\r\n * Generate colors for pie|doughnut charts\r\n * @param {?} count\r\n * @return {?}\r\n */\r\nfunction generateColors(count) {\r\n    /** @type {?} */\r\n    const colorsArr = new Array(count);\r\n    for (let i = 0; i < count; i++) {\r\n        colorsArr[i] = defaultColors[i] || getRandomColor();\r\n    }\r\n    return colorsArr;\r\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/theme.service.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nclass ThemeService {\r\n    constructor() {\r\n        this.pColorschemesOptions = {};\r\n        this.colorschemesOptions = new BehaviorSubject({});\r\n    }\r\n    /**\r\n     * @param {?} options\r\n     * @return {?}\r\n     */\r\n    setColorschemesOptions(options) {\r\n        this.pColorschemesOptions = options;\r\n        this.colorschemesOptions.next(options);\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    getColorschemesOptions() {\r\n        return this.pColorschemesOptions;\r\n    }\r\n}\nThemeService.ɵfac = function ThemeService_Factory(t) { return new (t || ThemeService)(); };\r\n/** @nocollapse */\r\nThemeService.ctorParameters = () => [];\r\n/** @nocollapse */ ThemeService.ɵprov = ɵɵdefineInjectable({ factory: function ThemeService_Factory() { return new ThemeService(); }, token: ThemeService, providedIn: \"root\" });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ThemeService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\r\nif (false) {\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    ThemeService.prototype.pColorschemesOptions;\r\n    /** @type {?} */\r\n    ThemeService.prototype.colorschemesOptions;\r\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/base-chart.directive.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * @record\r\n */\r\nfunction OldState() { }\r\nif (false) {\r\n    /** @type {?} */\r\n    OldState.prototype.dataExists;\r\n    /** @type {?} */\r\n    OldState.prototype.dataLength;\r\n    /** @type {?} */\r\n    OldState.prototype.datasetsExists;\r\n    /** @type {?} */\r\n    OldState.prototype.datasetsLength;\r\n    /** @type {?} */\r\n    OldState.prototype.datasetsDataObjects;\r\n    /** @type {?} */\r\n    OldState.prototype.datasetsDataLengths;\r\n    /** @type {?} */\r\n    OldState.prototype.colorsExists;\r\n    /** @type {?} */\r\n    OldState.prototype.colors;\r\n    /** @type {?} */\r\n    OldState.prototype.labelsExist;\r\n    /** @type {?} */\r\n    OldState.prototype.labels;\r\n    /** @type {?} */\r\n    OldState.prototype.legendExists;\r\n    /** @type {?} */\r\n    OldState.prototype.legend;\r\n}\r\n/** @enum {number} */\r\nconst UpdateType = {\r\n    Default: 0,\r\n    Update: 1,\r\n    Refresh: 2,\r\n};\r\nUpdateType[UpdateType.Default] = 'Default';\r\nUpdateType[UpdateType.Update] = 'Update';\r\nUpdateType[UpdateType.Refresh] = 'Refresh';\r\nclass BaseChartDirective {\r\n    /**\r\n     * @param {?} element\r\n     * @param {?} themeService\r\n     */\r\n    constructor(element, themeService) {\r\n        this.element = element;\r\n        this.themeService = themeService;\r\n        this.options = {};\r\n        this.chartClick = new EventEmitter();\r\n        this.chartHover = new EventEmitter();\r\n        this.old = {\r\n            dataExists: false,\r\n            dataLength: 0,\r\n            datasetsExists: false,\r\n            datasetsLength: 0,\r\n            datasetsDataObjects: [],\r\n            datasetsDataLengths: [],\r\n            colorsExists: false,\r\n            colors: [],\r\n            labelsExist: false,\r\n            labels: [],\r\n            legendExists: false,\r\n            legend: {},\r\n        };\r\n        this.subs = [];\r\n    }\r\n    /**\r\n     * Register a plugin.\r\n     * @param {?} plugin\r\n     * @return {?}\r\n     */\r\n    static registerPlugin(plugin) {\r\n        pluginService.register(plugin);\r\n    }\r\n    /**\r\n     * @param {?} plugin\r\n     * @return {?}\r\n     */\r\n    static unregisterPlugin(plugin) {\r\n        pluginService.unregister(plugin);\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    ngOnInit() {\r\n        this.ctx = this.element.nativeElement.getContext('2d');\r\n        this.refresh();\r\n        this.subs.push(this.themeService.colorschemesOptions.subscribe((/**\r\n         * @param {?} r\r\n         * @return {?}\r\n         */\r\n        r => this.themeChanged(r))));\r\n    }\r\n    /**\r\n     * @private\r\n     * @param {?} options\r\n     * @return {?}\r\n     */\r\n    themeChanged(options) {\r\n        this.refresh();\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    ngDoCheck() {\r\n        if (!this.chart) {\r\n            return;\r\n        }\r\n        /** @type {?} */\r\n        let updateRequired = UpdateType.Default;\r\n        /** @type {?} */\r\n        const wantUpdate = (/**\r\n         * @param {?} x\r\n         * @return {?}\r\n         */\r\n        (x) => {\r\n            updateRequired = x > updateRequired ? x : updateRequired;\r\n        });\r\n        if (!!this.data !== this.old.dataExists) {\r\n            this.propagateDataToDatasets(this.data);\r\n            this.old.dataExists = !!this.data;\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (this.data && this.data.length !== this.old.dataLength) {\r\n            this.old.dataLength = this.data && this.data.length || 0;\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (!!this.datasets !== this.old.datasetsExists) {\r\n            this.old.datasetsExists = !!this.datasets;\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (this.datasets && this.datasets.length !== this.old.datasetsLength) {\r\n            this.old.datasetsLength = this.datasets && this.datasets.length || 0;\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (this.datasets && this.datasets.filter((/**\r\n         * @param {?} x\r\n         * @param {?} i\r\n         * @return {?}\r\n         */\r\n        (x, i) => x.data !== this.old.datasetsDataObjects[i])).length) {\r\n            this.old.datasetsDataObjects = this.datasets.map((/**\r\n             * @param {?} x\r\n             * @return {?}\r\n             */\r\n            x => x.data));\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (this.datasets && this.datasets.filter((/**\r\n         * @param {?} x\r\n         * @param {?} i\r\n         * @return {?}\r\n         */\r\n        (x, i) => x.data.length !== this.old.datasetsDataLengths[i])).length) {\r\n            this.old.datasetsDataLengths = this.datasets.map((/**\r\n             * @param {?} x\r\n             * @return {?}\r\n             */\r\n            x => x.data.length));\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (!!this.colors !== this.old.colorsExists) {\r\n            this.old.colorsExists = !!this.colors;\r\n            this.updateColors();\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        // This smells of inefficiency, might need to revisit this\r\n        if (this.colors && this.colors.filter((/**\r\n         * @param {?} x\r\n         * @param {?} i\r\n         * @return {?}\r\n         */\r\n        (x, i) => !this.colorsEqual(x, this.old.colors[i]))).length) {\r\n            this.old.colors = this.colors.map((/**\r\n             * @param {?} x\r\n             * @return {?}\r\n             */\r\n            x => this.copyColor(x)));\r\n            this.updateColors();\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (!!this.labels !== this.old.labelsExist) {\r\n            this.old.labelsExist = !!this.labels;\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (this.labels && this.labels.filter((/**\r\n         * @param {?} x\r\n         * @param {?} i\r\n         * @return {?}\r\n         */\r\n        (x, i) => !this.labelsEqual(x, this.old.labels[i]))).length) {\r\n            this.old.labels = this.labels.map((/**\r\n             * @param {?} x\r\n             * @return {?}\r\n             */\r\n            x => this.copyLabel(x)));\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (!!this.options.legend !== this.old.legendExists) {\r\n            this.old.legendExists = !!this.options.legend;\r\n            wantUpdate(UpdateType.Refresh);\r\n        }\r\n        if (this.options.legend && this.options.legend.position !== this.old.legend.position) {\r\n            this.old.legend.position = this.options.legend.position;\r\n            wantUpdate(UpdateType.Refresh);\r\n        }\r\n        switch ((/** @type {?} */ (updateRequired))) {\r\n            case UpdateType.Default:\r\n                break;\r\n            case UpdateType.Update:\r\n                this.update();\r\n                break;\r\n            case UpdateType.Refresh:\r\n                this.refresh();\r\n                break;\r\n        }\r\n    }\r\n    /**\r\n     * @param {?} a\r\n     * @return {?}\r\n     */\r\n    copyLabel(a) {\r\n        if (Array.isArray(a)) {\r\n            return [...a];\r\n        }\r\n        return a;\r\n    }\r\n    /**\r\n     * @param {?} a\r\n     * @param {?} b\r\n     * @return {?}\r\n     */\r\n    labelsEqual(a, b) {\r\n        return Array.isArray(a) === Array.isArray(b)\r\n            && (Array.isArray(a) || a === b)\r\n            && (!Array.isArray(a) || a.length === b.length)\r\n            && (!Array.isArray(a) || a.filter((/**\r\n             * @param {?} x\r\n             * @param {?} i\r\n             * @return {?}\r\n             */\r\n            (x, i) => x !== b[i])).length === 0);\r\n    }\r\n    /**\r\n     * @param {?} a\r\n     * @return {?}\r\n     */\r\n    copyColor(a) {\r\n        return {\r\n            backgroundColor: a.backgroundColor,\r\n            borderWidth: a.borderWidth,\r\n            borderColor: a.borderColor,\r\n            borderCapStyle: a.borderCapStyle,\r\n            borderDash: a.borderDash,\r\n            borderDashOffset: a.borderDashOffset,\r\n            borderJoinStyle: a.borderJoinStyle,\r\n            pointBorderColor: a.pointBorderColor,\r\n            pointBackgroundColor: a.pointBackgroundColor,\r\n            pointBorderWidth: a.pointBorderWidth,\r\n            pointRadius: a.pointRadius,\r\n            pointHoverRadius: a.pointHoverRadius,\r\n            pointHitRadius: a.pointHitRadius,\r\n            pointHoverBackgroundColor: a.pointHoverBackgroundColor,\r\n            pointHoverBorderColor: a.pointHoverBorderColor,\r\n            pointHoverBorderWidth: a.pointHoverBorderWidth,\r\n            pointStyle: a.pointStyle,\r\n            hoverBackgroundColor: a.hoverBackgroundColor,\r\n            hoverBorderColor: a.hoverBorderColor,\r\n            hoverBorderWidth: a.hoverBorderWidth,\r\n        };\r\n    }\r\n    /**\r\n     * @param {?} a\r\n     * @param {?} b\r\n     * @return {?}\r\n     */\r\n    colorsEqual(a, b) {\r\n        if (!a !== !b) {\r\n            return false;\r\n        }\r\n        return !a ||\r\n            (a.backgroundColor === b.backgroundColor)\r\n                && (a.borderWidth === b.borderWidth)\r\n                && (a.borderColor === b.borderColor)\r\n                && (a.borderCapStyle === b.borderCapStyle)\r\n                && (a.borderDash === b.borderDash)\r\n                && (a.borderDashOffset === b.borderDashOffset)\r\n                && (a.borderJoinStyle === b.borderJoinStyle)\r\n                && (a.pointBorderColor === b.pointBorderColor)\r\n                && (a.pointBackgroundColor === b.pointBackgroundColor)\r\n                && (a.pointBorderWidth === b.pointBorderWidth)\r\n                && (a.pointRadius === b.pointRadius)\r\n                && (a.pointHoverRadius === b.pointHoverRadius)\r\n                && (a.pointHitRadius === b.pointHitRadius)\r\n                && (a.pointHoverBackgroundColor === b.pointHoverBackgroundColor)\r\n                && (a.pointHoverBorderColor === b.pointHoverBorderColor)\r\n                && (a.pointHoverBorderWidth === b.pointHoverBorderWidth)\r\n                && (a.pointStyle === b.pointStyle)\r\n                && (a.hoverBackgroundColor === b.hoverBackgroundColor)\r\n                && (a.hoverBorderColor === b.hoverBorderColor)\r\n                && (a.hoverBorderWidth === b.hoverBorderWidth);\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    updateColors() {\r\n        this.datasets.forEach((/**\r\n         * @param {?} elm\r\n         * @param {?} index\r\n         * @return {?}\r\n         */\r\n        (elm, index) => {\r\n            if (this.colors && this.colors[index]) {\r\n                Object.assign(elm, this.colors[index]);\r\n            }\r\n            else {\r\n                Object.assign(elm, getColors(this.chartType, index, elm.data.length), Object.assign({}, elm));\r\n            }\r\n        }));\r\n    }\r\n    /**\r\n     * @param {?} changes\r\n     * @return {?}\r\n     */\r\n    ngOnChanges(changes) {\r\n        /** @type {?} */\r\n        let updateRequired = UpdateType.Default;\r\n        /** @type {?} */\r\n        const wantUpdate = (/**\r\n         * @param {?} x\r\n         * @return {?}\r\n         */\r\n        (x) => {\r\n            updateRequired = x > updateRequired ? x : updateRequired;\r\n        });\r\n        // Check if the changes are in the data or datasets or labels or legend\r\n        if (changes.hasOwnProperty('data') && changes.data.currentValue) {\r\n            this.propagateDataToDatasets(changes.data.currentValue);\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (changes.hasOwnProperty('datasets') && changes.datasets.currentValue) {\r\n            this.propagateDatasetsToData(changes.datasets.currentValue);\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (changes.hasOwnProperty('labels')) {\r\n            if (this.chart) {\r\n                this.chart.data.labels = changes.labels.currentValue;\r\n            }\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (changes.hasOwnProperty('legend')) {\r\n            if (this.chart) {\r\n                this.chart.config.options.legend.display = changes.legend.currentValue;\r\n                this.chart.generateLegend();\r\n            }\r\n            wantUpdate(UpdateType.Update);\r\n        }\r\n        if (changes.hasOwnProperty('options')) {\r\n            wantUpdate(UpdateType.Refresh);\r\n        }\r\n        switch ((/** @type {?} */ (updateRequired))) {\r\n            case UpdateType.Update:\r\n                this.update();\r\n                break;\r\n            case UpdateType.Refresh:\r\n            case UpdateType.Default:\r\n                this.refresh();\r\n                break;\r\n        }\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    ngOnDestroy() {\r\n        if (this.chart) {\r\n            this.chart.destroy();\r\n            this.chart = void 0;\r\n        }\r\n        this.subs.forEach((/**\r\n         * @param {?} x\r\n         * @return {?}\r\n         */\r\n        x => x.unsubscribe()));\r\n    }\r\n    /**\r\n     * @param {?=} duration\r\n     * @return {?}\r\n     */\r\n    update(duration) {\r\n        if (this.chart) {\r\n            return this.chart.update(duration);\r\n        }\r\n    }\r\n    /**\r\n     * @param {?} index\r\n     * @param {?} hidden\r\n     * @return {?}\r\n     */\r\n    hideDataset(index, hidden) {\r\n        this.chart.getDatasetMeta(index).hidden = hidden;\r\n        this.chart.update();\r\n    }\r\n    /**\r\n     * @param {?} index\r\n     * @return {?}\r\n     */\r\n    isDatasetHidden(index) {\r\n        return this.chart.getDatasetMeta(index).hidden;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    toBase64Image() {\r\n        return this.chart.toBase64Image();\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    getChartConfiguration() {\r\n        /** @type {?} */\r\n        const datasets = this.getDatasets();\r\n        /** @type {?} */\r\n        const options = Object.assign({}, this.options);\r\n        if (this.legend === false) {\r\n            options.legend = { display: false };\r\n        }\r\n        // hook for onHover and onClick events\r\n        options.hover = options.hover || {};\r\n        if (!options.hover.onHover) {\r\n            options.hover.onHover = (/**\r\n             * @param {?} event\r\n             * @param {?} active\r\n             * @return {?}\r\n             */\r\n            (event, active) => {\r\n                if (active && !active.length) {\r\n                    return;\r\n                }\r\n                this.chartHover.emit({ event, active });\r\n            });\r\n        }\r\n        if (!options.onClick) {\r\n            options.onClick = (/**\r\n             * @param {?=} event\r\n             * @param {?=} active\r\n             * @return {?}\r\n             */\r\n            (event, active) => {\r\n                this.chartClick.emit({ event, active });\r\n            });\r\n        }\r\n        /** @type {?} */\r\n        const mergedOptions = this.smartMerge(options, this.themeService.getColorschemesOptions());\r\n        return {\r\n            type: this.chartType,\r\n            data: {\r\n                labels: this.labels || [],\r\n                datasets\r\n            },\r\n            plugins: this.plugins,\r\n            options: mergedOptions,\r\n        };\r\n    }\r\n    /**\r\n     * @param {?} ctx\r\n     * @return {?}\r\n     */\r\n    getChartBuilder(ctx /*, data:any[], options:any*/) {\r\n        /** @type {?} */\r\n        const chartConfig = this.getChartConfiguration();\r\n        return new Chart$1(ctx, chartConfig);\r\n    }\r\n    /**\r\n     * @param {?} options\r\n     * @param {?} overrides\r\n     * @param {?=} level\r\n     * @return {?}\r\n     */\r\n    smartMerge(options, overrides, level = 0) {\r\n        if (level === 0) {\r\n            options = cloneDeep(options);\r\n        }\r\n        /** @type {?} */\r\n        const keysToUpdate = Object.keys(overrides);\r\n        keysToUpdate.forEach((/**\r\n         * @param {?} key\r\n         * @return {?}\r\n         */\r\n        key => {\r\n            if (Array.isArray(overrides[key])) {\r\n                /** @type {?} */\r\n                const arrayElements = options[key];\r\n                if (arrayElements) {\r\n                    arrayElements.forEach((/**\r\n                     * @param {?} r\r\n                     * @return {?}\r\n                     */\r\n                    r => {\r\n                        this.smartMerge(r, overrides[key][0], level + 1);\r\n                    }));\r\n                }\r\n            }\r\n            else if (typeof (overrides[key]) === 'object') {\r\n                if (!(key in options)) {\r\n                    options[key] = {};\r\n                }\r\n                this.smartMerge(options[key], overrides[key], level + 1);\r\n            }\r\n            else {\r\n                options[key] = overrides[key];\r\n            }\r\n        }));\r\n        if (level === 0) {\r\n            return options;\r\n        }\r\n    }\r\n    /**\r\n     * @private\r\n     * @param {?} label\r\n     * @return {?}\r\n     */\r\n    isMultiLineLabel(label) {\r\n        return Array.isArray(label);\r\n    }\r\n    /**\r\n     * @private\r\n     * @param {?} label\r\n     * @return {?}\r\n     */\r\n    joinLabel(label) {\r\n        if (!label) {\r\n            return null;\r\n        }\r\n        if (this.isMultiLineLabel(label)) {\r\n            return label.join(' ');\r\n        }\r\n        else {\r\n            return label;\r\n        }\r\n    }\r\n    /**\r\n     * @private\r\n     * @param {?} datasets\r\n     * @return {?}\r\n     */\r\n    propagateDatasetsToData(datasets) {\r\n        this.data = this.datasets.map((/**\r\n         * @param {?} r\r\n         * @return {?}\r\n         */\r\n        r => r.data));\r\n        if (this.chart) {\r\n            this.chart.data.datasets = datasets;\r\n        }\r\n        this.updateColors();\r\n    }\r\n    /**\r\n     * @private\r\n     * @param {?} newDataValues\r\n     * @return {?}\r\n     */\r\n    propagateDataToDatasets(newDataValues) {\r\n        if (this.isMultiDataSet(newDataValues)) {\r\n            if (this.datasets && newDataValues.length === this.datasets.length) {\r\n                this.datasets.forEach((/**\r\n                 * @param {?} dataset\r\n                 * @param {?} i\r\n                 * @return {?}\r\n                 */\r\n                (dataset, i) => {\r\n                    dataset.data = newDataValues[i];\r\n                }));\r\n            }\r\n            else {\r\n                this.datasets = newDataValues.map((/**\r\n                 * @param {?} data\r\n                 * @param {?} index\r\n                 * @return {?}\r\n                 */\r\n                (data, index) => {\r\n                    return { data, label: this.joinLabel(this.labels[index]) || `Label ${index}` };\r\n                }));\r\n                if (this.chart) {\r\n                    this.chart.data.datasets = this.datasets;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (!this.datasets) {\r\n                this.datasets = [{ data: newDataValues }];\r\n                if (this.chart) {\r\n                    this.chart.data.datasets = this.datasets;\r\n                }\r\n            }\r\n            else {\r\n                if (!this.datasets[0]) {\r\n                    this.datasets[0] = {};\r\n                }\r\n                this.datasets[0].data = newDataValues;\r\n                this.datasets.splice(1); // Remove all elements but the first\r\n            }\r\n        }\r\n        this.updateColors();\r\n    }\r\n    /**\r\n     * @private\r\n     * @param {?} data\r\n     * @return {?}\r\n     */\r\n    isMultiDataSet(data) {\r\n        return Array.isArray(data[0]);\r\n    }\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    getDatasets() {\r\n        if (!this.datasets && !this.data) {\r\n            throw new Error(`ng-charts configuration error, data or datasets field are required to render chart ${this.chartType}`);\r\n        }\r\n        // If `datasets` is defined, use it over the `data` property.\r\n        if (this.datasets) {\r\n            this.propagateDatasetsToData(this.datasets);\r\n            return this.datasets;\r\n        }\r\n        if (this.data) {\r\n            this.propagateDataToDatasets(this.data);\r\n            return this.datasets;\r\n        }\r\n    }\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    refresh() {\r\n        // if (this.options && this.options.responsive) {\r\n        //   setTimeout(() => this.refresh(), 50);\r\n        // }\r\n        // todo: remove this line, it is producing flickering\r\n        if (this.chart) {\r\n            this.chart.destroy();\r\n            this.chart = void 0;\r\n        }\r\n        if (this.ctx) {\r\n            this.chart = this.getChartBuilder(this.ctx /*, data, this.options*/);\r\n        }\r\n    }\r\n}\nBaseChartDirective.ɵfac = function BaseChartDirective_Factory(t) { return new (t || BaseChartDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ThemeService)); };\nBaseChartDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: BaseChartDirective, selectors: [[\"canvas\", \"baseChart\", \"\"]], inputs: { options: \"options\", data: \"data\", datasets: \"datasets\", labels: \"labels\", chartType: \"chartType\", colors: \"colors\", legend: \"legend\", plugins: \"plugins\" }, outputs: { chartClick: \"chartClick\", chartHover: \"chartHover\" }, exportAs: [\"base-chart\"], features: [ɵngcc0.ɵɵNgOnChangesFeature] });\r\n/** @nocollapse */\r\nBaseChartDirective.ctorParameters = () => [\r\n    { type: ElementRef },\r\n    { type: ThemeService }\r\n];\r\nBaseChartDirective.propDecorators = {\r\n    data: [{ type: Input }],\r\n    datasets: [{ type: Input }],\r\n    labels: [{ type: Input }],\r\n    options: [{ type: Input }],\r\n    chartType: [{ type: Input }],\r\n    colors: [{ type: Input }],\r\n    legend: [{ type: Input }],\r\n    plugins: [{ type: Input }],\r\n    chartClick: [{ type: Output }],\r\n    chartHover: [{ type: Output }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BaseChartDirective, [{\n        type: Directive,\n        args: [{\n                // tslint:disable-next-line:directive-selector\n                selector: 'canvas[baseChart]',\n                exportAs: 'base-chart'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ThemeService }]; }, { options: [{\n            type: Input\n        }], chartClick: [{\n            type: Output\n        }], chartHover: [{\n            type: Output\n        }], data: [{\n            type: Input\n        }], datasets: [{\n            type: Input\n        }], labels: [{\n            type: Input\n        }], chartType: [{\n            type: Input\n        }], colors: [{\n            type: Input\n        }], legend: [{\n            type: Input\n        }], plugins: [{\n            type: Input\n        }] }); })();\r\nif (false) {\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.data;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.datasets;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.labels;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.options;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.chartType;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.colors;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.legend;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.plugins;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.chartClick;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.chartHover;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.ctx;\r\n    /** @type {?} */\r\n    BaseChartDirective.prototype.chart;\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    BaseChartDirective.prototype.old;\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    BaseChartDirective.prototype.subs;\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    BaseChartDirective.prototype.element;\r\n    /**\r\n     * @type {?}\r\n     * @private\r\n     */\r\n    BaseChartDirective.prototype.themeService;\r\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/charts.module.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nclass ChartsModule {\r\n}\nChartsModule.ɵfac = function ChartsModule_Factory(t) { return new (t || ChartsModule)(); };\nChartsModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: ChartsModule });\nChartsModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({});\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ChartsModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [\n                    BaseChartDirective\n                ],\n                imports: [],\n                exports: [\n                    BaseChartDirective\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ChartsModule, { declarations: [BaseChartDirective], exports: [BaseChartDirective] }); })();\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/color.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * @record\r\n */\r\nfunction Color() { }\r\nif (false) {\r\n    /** @type {?|undefined} */\r\n    Color.prototype.backgroundColor;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.borderWidth;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.borderColor;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.borderCapStyle;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.borderDash;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.borderDashOffset;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.borderJoinStyle;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.pointBorderColor;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.pointBackgroundColor;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.pointBorderWidth;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.pointRadius;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.pointHoverRadius;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.pointHitRadius;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.pointHoverBackgroundColor;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.pointHoverBorderColor;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.pointHoverBorderWidth;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.pointStyle;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.hoverBackgroundColor;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.hoverBorderColor;\r\n    /** @type {?|undefined} */\r\n    Color.prototype.hoverBorderWidth;\r\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/colors.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * @record\r\n */\r\nfunction Colors() { }\r\nif (false) {\r\n    /** @type {?|undefined} */\r\n    Colors.prototype.data;\r\n    /** @type {?|undefined} */\r\n    Colors.prototype.label;\r\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/monkey-patch-chart-js-legend.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n// tslint:disable:variable-name\r\n// tslint:disable:no-var-keyword\r\n// tslint:disable:prefer-const\r\n// tslint:disable:only-arrow-functions\r\n// tslint:disable:one-variable-per-declaration\r\n// tslint:disable:object-literal-shorthand\r\n// tslint:disable:space-before-function-paren\r\n/**\r\n * @return {?}\r\n */\r\nfunction monkeyPatchChartJsLegend() {\r\n    if (typeof Chart === 'undefined') {\r\n        console.log('Chart not defined (guessing this is a universal build, and I don\\'t know why this happens -- Aviad)');\r\n        return;\r\n    }\r\n    /** @type {?} */\r\n    const plugins = Chart.plugins.getAll();\r\n    /** @type {?} */\r\n    const legend = plugins.filter((/**\r\n     * @param {?} p\r\n     * @return {?}\r\n     */\r\n    p => p.id === 'legend'))[0];\r\n    legend._element.prototype.fit = fit;\r\n    legend._element.prototype.draw = draw;\r\n    /** @type {?} */\r\n    const helpers = Chart.helpers;\r\n    /** @type {?} */\r\n    const defaults = Chart.defaults;\r\n    /** @type {?} */\r\n    const valueOrDefault = helpers.valueOrDefault;\r\n    /**\r\n     * @param {?} labelOpts\r\n     * @param {?} fontSize\r\n     * @return {?}\r\n     */\r\n    function getBoxWidth(labelOpts, fontSize) {\r\n        return labelOpts.usePointStyle && labelOpts.boxWidth > fontSize ?\r\n            fontSize :\r\n            labelOpts.boxWidth;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    function fit() {\r\n        /** @type {?} */\r\n        var me = this;\r\n        /** @type {?} */\r\n        var opts = me.options;\r\n        /** @type {?} */\r\n        var labelOpts = opts.labels;\r\n        /** @type {?} */\r\n        var display = opts.display;\r\n        /** @type {?} */\r\n        var ctx = me.ctx;\r\n        /** @type {?} */\r\n        var labelFont = helpers.options._parseFont(labelOpts);\r\n        /** @type {?} */\r\n        var fontSize = labelFont.size;\r\n        // Reset hit boxes\r\n        /** @type {?} */\r\n        var hitboxes = me.legendHitBoxes = [];\r\n        /** @type {?} */\r\n        var minSize = me.minSize;\r\n        /** @type {?} */\r\n        var isHorizontal = me.isHorizontal();\r\n        if (isHorizontal) {\r\n            minSize.width = me.maxWidth; // fill all the width\r\n            minSize.height = display ? 10 : 0;\r\n        }\r\n        else {\r\n            minSize.width = display ? 10 : 0;\r\n            minSize.height = me.maxHeight; // fill all the height\r\n        }\r\n        /** @type {?} */\r\n        var getMaxLineWidth = (/**\r\n         * @param {?} textLines\r\n         * @return {?}\r\n         */\r\n        function (textLines) {\r\n            return textLines.map((/**\r\n             * @param {?} textLine\r\n             * @return {?}\r\n             */\r\n            function (textLine) {\r\n                return ctx.measureText(textLine).width;\r\n            })).reduce((/**\r\n             * @param {?} acc\r\n             * @param {?} v\r\n             * @return {?}\r\n             */\r\n            function (acc, v) {\r\n                return v > acc ? v : acc;\r\n            }), 0);\r\n        });\r\n        // Increase sizes here\r\n        if (display) {\r\n            ctx.font = labelFont.string;\r\n            if (isHorizontal) {\r\n                // Labels\r\n                // Width of each line of legend boxes. Labels wrap onto multiple lines when there are too many to fit on one\r\n                /** @type {?} */\r\n                var lineWidths = me.lineWidths = [0];\r\n                /** @type {?} */\r\n                var lineHeights = me.lineHeights = [];\r\n                /** @type {?} */\r\n                var currentLineHeight = 0;\r\n                /** @type {?} */\r\n                var lineIndex = 0;\r\n                ctx.textAlign = 'left';\r\n                ctx.textBaseline = 'top';\r\n                helpers.each(me.legendItems, (/**\r\n                 * @param {?} legendItem\r\n                 * @param {?} i\r\n                 * @return {?}\r\n                 */\r\n                function (legendItem, i) {\r\n                    /** @type {?} */\r\n                    var width;\r\n                    /** @type {?} */\r\n                    var height;\r\n                    if (helpers.isArray(legendItem.text)) {\r\n                        width = getMaxLineWidth(legendItem.text);\r\n                        height = fontSize * legendItem.text.length + labelOpts.padding;\r\n                    }\r\n                    else {\r\n                        width = ctx.measureText(legendItem.text).width;\r\n                        height = fontSize + labelOpts.padding;\r\n                    }\r\n                    width += getBoxWidth(labelOpts, fontSize) + (fontSize / 2);\r\n                    if (lineWidths[lineWidths.length - 1] + width + 2 * labelOpts.padding > minSize.width) {\r\n                        lineHeights.push(currentLineHeight);\r\n                        currentLineHeight = 0;\r\n                        lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\r\n                        lineIndex++;\r\n                    }\r\n                    legendItem.lineOrColumnIndex = lineIndex;\r\n                    if (height > currentLineHeight) {\r\n                        currentLineHeight = height;\r\n                    }\r\n                    // Store the hitbox width and height here. Final position will be updated in `draw`\r\n                    hitboxes[i] = {\r\n                        left: 0,\r\n                        top: 0,\r\n                        width: width,\r\n                        height: height,\r\n                    };\r\n                    lineWidths[lineWidths.length - 1] += width + labelOpts.padding;\r\n                }));\r\n                lineHeights.push(currentLineHeight);\r\n                minSize.height += lineHeights.reduce((/**\r\n                 * @param {?} acc\r\n                 * @param {?} v\r\n                 * @return {?}\r\n                 */\r\n                function (acc, v) {\r\n                    return acc + v;\r\n                }), 0);\r\n            }\r\n            else {\r\n                /** @type {?} */\r\n                var vPadding = labelOpts.padding;\r\n                /** @type {?} */\r\n                var columnWidths = me.columnWidths = [];\r\n                /** @type {?} */\r\n                var columnHeights = me.columnHeights = [];\r\n                /** @type {?} */\r\n                var totalWidth = labelOpts.padding;\r\n                /** @type {?} */\r\n                var currentColWidth = 0;\r\n                /** @type {?} */\r\n                var currentColHeight = 0;\r\n                /** @type {?} */\r\n                var columnIndex = 0;\r\n                helpers.each(me.legendItems, (/**\r\n                 * @param {?} legendItem\r\n                 * @param {?} i\r\n                 * @return {?}\r\n                 */\r\n                function (legendItem, i) {\r\n                    /** @type {?} */\r\n                    var itemWidth;\r\n                    /** @type {?} */\r\n                    var height;\r\n                    if (helpers.isArray(legendItem.text)) {\r\n                        itemWidth = getMaxLineWidth(legendItem.text);\r\n                        height = fontSize * legendItem.text.length;\r\n                    }\r\n                    else {\r\n                        itemWidth = ctx.measureText(legendItem.text).width;\r\n                        height = fontSize;\r\n                    }\r\n                    itemWidth += getBoxWidth(labelOpts, fontSize) + (fontSize / 2);\r\n                    // If too tall, go to new column\r\n                    if (currentColHeight + fontSize + 2 * vPadding > minSize.height) {\r\n                        totalWidth += currentColWidth + labelOpts.padding;\r\n                        columnWidths.push(currentColWidth); // previous column width\r\n                        columnHeights.push(currentColHeight);\r\n                        currentColWidth = 0;\r\n                        currentColHeight = 0;\r\n                        columnIndex++;\r\n                    }\r\n                    legendItem.lineOrColumnIndex = columnIndex;\r\n                    // Get max width\r\n                    currentColWidth = Math.max(currentColWidth, itemWidth);\r\n                    currentColHeight += height + vPadding;\r\n                    // Store the hitbox width and height here. Final position will be updated in `draw`\r\n                    hitboxes[i] = {\r\n                        left: 0,\r\n                        top: 0,\r\n                        width: itemWidth,\r\n                        height: height\r\n                    };\r\n                }));\r\n                totalWidth += currentColWidth;\r\n                columnWidths.push(currentColWidth);\r\n                columnHeights.push(currentColHeight);\r\n                minSize.width += totalWidth;\r\n            }\r\n        }\r\n        me.width = minSize.width;\r\n        me.height = minSize.height;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    function draw() {\r\n        /** @type {?} */\r\n        var me = this;\r\n        /** @type {?} */\r\n        var opts = me.options;\r\n        /** @type {?} */\r\n        var labelOpts = opts.labels;\r\n        /** @type {?} */\r\n        var globalDefaults = defaults.global;\r\n        /** @type {?} */\r\n        var defaultColor = globalDefaults.defaultColor;\r\n        /** @type {?} */\r\n        var lineDefault = globalDefaults.elements.line;\r\n        /** @type {?} */\r\n        var legendHeight = me.height;\r\n        /** @type {?} */\r\n        var columnHeights = me.columnHeights;\r\n        /** @type {?} */\r\n        var columnWidths = me.columnWidths;\r\n        /** @type {?} */\r\n        var legendWidth = me.width;\r\n        /** @type {?} */\r\n        var lineWidths = me.lineWidths;\r\n        /** @type {?} */\r\n        var lineHeights = me.lineHeights;\r\n        if (opts.display) {\r\n            /** @type {?} */\r\n            var ctx = me.ctx;\r\n            /** @type {?} */\r\n            var fontColor = valueOrDefault(labelOpts.fontColor, globalDefaults.defaultFontColor);\r\n            /** @type {?} */\r\n            var labelFont = helpers.options._parseFont(labelOpts);\r\n            /** @type {?} */\r\n            var fontSize = labelFont.size;\r\n            /** @type {?} */\r\n            var cursor;\r\n            // Canvas setup\r\n            ctx.textAlign = 'left';\r\n            ctx.textBaseline = 'middle';\r\n            ctx.lineWidth = 0.5;\r\n            ctx.strokeStyle = fontColor; // for strikethrough effect\r\n            ctx.fillStyle = fontColor; // render in correct colour\r\n            ctx.font = labelFont.string;\r\n            /** @type {?} */\r\n            var boxWidth = getBoxWidth(labelOpts, fontSize);\r\n            /** @type {?} */\r\n            var hitboxes = me.legendHitBoxes;\r\n            // current position\r\n            /** @type {?} */\r\n            var drawLegendBox = (/**\r\n             * @param {?} x\r\n             * @param {?} y\r\n             * @param {?} legendItem\r\n             * @return {?}\r\n             */\r\n            function (x, y, legendItem) {\r\n                if (isNaN(boxWidth) || boxWidth <= 0) {\r\n                    return;\r\n                }\r\n                // Set the ctx for the box\r\n                ctx.save();\r\n                /** @type {?} */\r\n                var lineWidth = valueOrDefault(legendItem.lineWidth, lineDefault.borderWidth);\r\n                ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);\r\n                ctx.lineCap = valueOrDefault(legendItem.lineCap, lineDefault.borderCapStyle);\r\n                ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, lineDefault.borderDashOffset);\r\n                ctx.lineJoin = valueOrDefault(legendItem.lineJoin, lineDefault.borderJoinStyle);\r\n                ctx.lineWidth = lineWidth;\r\n                ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);\r\n                if (ctx.setLineDash) {\r\n                    // IE 9 and 10 do not support line dash\r\n                    ctx.setLineDash(valueOrDefault(legendItem.lineDash, lineDefault.borderDash));\r\n                }\r\n                if (opts.labels && opts.labels.usePointStyle) {\r\n                    // Recalculate x and y for drawPoint() because its expecting\r\n                    // x and y to be center of figure (instead of top left)\r\n                    /** @type {?} */\r\n                    var radius = boxWidth * Math.SQRT2 / 2;\r\n                    /** @type {?} */\r\n                    var centerX = x + boxWidth / 2;\r\n                    /** @type {?} */\r\n                    var centerY = y + fontSize / 2;\r\n                    // Draw pointStyle as legend symbol\r\n                    helpers.canvas.drawPoint(ctx, legendItem.pointStyle, radius, centerX, centerY);\r\n                }\r\n                else {\r\n                    // Draw box as legend symbol\r\n                    if (lineWidth !== 0) {\r\n                        ctx.strokeRect(x, y, boxWidth, fontSize);\r\n                    }\r\n                    ctx.fillRect(x, y, boxWidth, fontSize);\r\n                }\r\n                ctx.restore();\r\n            });\r\n            /** @type {?} */\r\n            var drawStrikeThrough = (/**\r\n             * @param {?} x\r\n             * @param {?} y\r\n             * @param {?} w\r\n             * @return {?}\r\n             */\r\n            function (x, y, w) {\r\n                ctx.beginPath();\r\n                ctx.lineWidth = 2;\r\n                ctx.moveTo(x, y);\r\n                ctx.lineTo(x + w, y);\r\n                ctx.stroke();\r\n            });\r\n            /** @type {?} */\r\n            var drawCrossOver = (/**\r\n             * @param {?} x\r\n             * @param {?} y\r\n             * @param {?} w\r\n             * @param {?} h\r\n             * @return {?}\r\n             */\r\n            function (x, y, w, h) {\r\n                ctx.beginPath();\r\n                ctx.lineWidth = 2;\r\n                ctx.moveTo(x, y);\r\n                ctx.lineTo(x + w, y + h);\r\n                ctx.moveTo(x, y + h);\r\n                ctx.lineTo(x + w, y);\r\n                ctx.stroke();\r\n            });\r\n            /** @type {?} */\r\n            var fillText = (/**\r\n             * @param {?} x\r\n             * @param {?} y\r\n             * @param {?} legendItem\r\n             * @param {?} textWidth\r\n             * @return {?}\r\n             */\r\n            function (x, y, legendItem, textWidth) {\r\n                /** @type {?} */\r\n                var halfFontSize = fontSize / 2;\r\n                /** @type {?} */\r\n                var xLeft = boxWidth + halfFontSize + x;\r\n                /** @type {?} */\r\n                var yMiddle = y + halfFontSize;\r\n                if (helpers.isArray(legendItem.text)) {\r\n                    helpers.each(legendItem.text, (/**\r\n                     * @param {?} textLine\r\n                     * @param {?} index\r\n                     * @return {?}\r\n                     */\r\n                    function (textLine, index) {\r\n                        /** @type {?} */\r\n                        var lineOffset = index * fontSize;\r\n                        ctx.fillText(textLine, xLeft, yMiddle + lineOffset);\r\n                    }));\r\n                }\r\n                else {\r\n                    ctx.fillText(legendItem.text, xLeft, yMiddle);\r\n                }\r\n                if (legendItem.hidden) {\r\n                    if (helpers.isArray(legendItem.text)) {\r\n                        drawCrossOver(xLeft, yMiddle, textWidth, (legendItem.text.length - 1) * (fontSize - 1));\r\n                    }\r\n                    else {\r\n                        drawStrikeThrough(xLeft, yMiddle, textWidth);\r\n                    }\r\n                }\r\n            });\r\n            /** @type {?} */\r\n            var alignmentOffset = (/**\r\n             * @param {?} dimension\r\n             * @param {?} blockSize\r\n             * @return {?}\r\n             */\r\n            function (dimension, blockSize) {\r\n                switch (opts.align) {\r\n                    case 'start':\r\n                        return labelOpts.padding;\r\n                    case 'end':\r\n                        return dimension - blockSize;\r\n                    default: // center\r\n                        return (dimension - blockSize + labelOpts.padding) / 2;\r\n                }\r\n            });\r\n            // Horizontal\r\n            /** @type {?} */\r\n            var isHorizontal = me.isHorizontal();\r\n            if (isHorizontal) {\r\n                cursor = {\r\n                    x: me.left + alignmentOffset(legendWidth, lineWidths[0]),\r\n                    y: me.top + labelOpts.padding,\r\n                    line: 0\r\n                };\r\n            }\r\n            else {\r\n                cursor = {\r\n                    x: me.left + labelOpts.padding,\r\n                    y: me.top + alignmentOffset(legendHeight, columnHeights[0]),\r\n                    line: 0\r\n                };\r\n            }\r\n            helpers.each(me.legendItems, (/**\r\n             * @param {?} legendItem\r\n             * @param {?} i\r\n             * @return {?}\r\n             */\r\n            function (legendItem, i) {\r\n                /** @type {?} */\r\n                var textWidth;\r\n                /** @type {?} */\r\n                var height;\r\n                /** @type {?} */\r\n                var boxTopOffset;\r\n                if (legendItem.lineOrColumnIndex > cursor.line) {\r\n                    if (isHorizontal) {\r\n                        cursor.y += lineHeights[cursor.line];\r\n                        cursor.line = legendItem.lineOrColumnIndex;\r\n                        cursor.x = me.left + alignmentOffset(legendWidth, lineWidths[cursor.line]);\r\n                    }\r\n                    else {\r\n                        cursor.x += columnWidths[cursor.line] + labelOpts.padding;\r\n                        cursor.line = legendItem.lineOrColumnIndex;\r\n                        cursor.y = me.top + alignmentOffset(legendHeight, columnHeights[cursor.line]);\r\n                    }\r\n                }\r\n                if (helpers.isArray(legendItem.text)) {\r\n                    textWidth = legendItem.text.map((/**\r\n                     * @param {?} textLine\r\n                     * @return {?}\r\n                     */\r\n                    function (textLine) {\r\n                        return ctx.measureText(textLine).width;\r\n                    })).reduce((/**\r\n                     * @param {?} acc\r\n                     * @param {?} v\r\n                     * @return {?}\r\n                     */\r\n                    function (acc, v) {\r\n                        return v > acc ? v : acc;\r\n                    }), 0);\r\n                    boxTopOffset = fontSize / 2 * (legendItem.text.length - 1);\r\n                    height = fontSize * legendItem.text.length;\r\n                }\r\n                else {\r\n                    textWidth = ctx.measureText(legendItem.text).width;\r\n                    boxTopOffset = 0;\r\n                    height = fontSize;\r\n                }\r\n                /** @type {?} */\r\n                var width = boxWidth + (fontSize / 2) + textWidth;\r\n                /** @type {?} */\r\n                var x = cursor.x;\r\n                /** @type {?} */\r\n                var y = cursor.y;\r\n                /** @type {?} */\r\n                var topOffset = isHorizontal ? Math.trunc((lineHeights[cursor.line] - hitboxes[i].height) / 2) : 0;\r\n                drawLegendBox(x, y + boxTopOffset + topOffset, legendItem);\r\n                hitboxes[i].left = x;\r\n                hitboxes[i].top = y;\r\n                // Fill the actual label\r\n                fillText(x, y + topOffset, legendItem, textWidth);\r\n                if (isHorizontal) {\r\n                    cursor.x += width + labelOpts.padding;\r\n                }\r\n                else {\r\n                    cursor.y += height + labelOpts.padding;\r\n                }\r\n            }));\r\n        }\r\n    }\r\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: lib/monkey-patch-chart-js-tooltip.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n// tslint:disable:variable-name\r\n// tslint:disable:no-var-keyword\r\n// tslint:disable:prefer-const\r\n// tslint:disable:only-arrow-functions\r\n// tslint:disable:one-variable-per-declaration\r\n// tslint:disable:object-literal-shorthand\r\n// tslint:disable:space-before-function-paren\r\n/**\r\n * @return {?}\r\n */\r\nfunction monkeyPatchChartJsTooltip() {\r\n    if (typeof Chart === 'undefined') {\r\n        console.log('Chart not defined (guessing this is a universal build, and I don\\'t know why this happens -- Aviad)');\r\n        return;\r\n    }\r\n    Chart.Tooltip.prototype.drawBody = drawBody;\r\n    /** @type {?} */\r\n    const helpers = Chart.helpers;\r\n    /**\r\n     * @param {?} vm\r\n     * @param {?} align\r\n     * @return {?}\r\n     */\r\n    function getAlignedX(vm, align) {\r\n        return align === 'center'\r\n            ? vm.x + vm.width / 2\r\n            : align === 'right'\r\n                ? vm.x + vm.width - vm.xPadding\r\n                : vm.x + vm.xPadding;\r\n    }\r\n    /**\r\n     * @param {?} pt\r\n     * @param {?} vm\r\n     * @param {?} ctx\r\n     * @return {?}\r\n     */\r\n    function drawBody(pt, vm, ctx) {\r\n        /** @type {?} */\r\n        var bodyFontSize = vm.bodyFontSize;\r\n        /** @type {?} */\r\n        var bodySpacing = vm.bodySpacing;\r\n        /** @type {?} */\r\n        var bodyAlign = vm._bodyAlign;\r\n        /** @type {?} */\r\n        var body = vm.body;\r\n        /** @type {?} */\r\n        var drawColorBoxes = vm.displayColors;\r\n        /** @type {?} */\r\n        var labelColors = vm.labelColors;\r\n        /** @type {?} */\r\n        var xLinePadding = 0;\r\n        /** @type {?} */\r\n        var colorX = drawColorBoxes ? getAlignedX(vm, 'left') : 0;\r\n        /** @type {?} */\r\n        var textColor;\r\n        ctx.textAlign = bodyAlign;\r\n        ctx.textBaseline = 'top';\r\n        ctx.font = helpers.fontString(bodyFontSize, vm._bodyFontStyle, vm._bodyFontFamily);\r\n        pt.x = getAlignedX(vm, bodyAlign);\r\n        // Before Body\r\n        /** @type {?} */\r\n        var fillLineOfText = (/**\r\n         * @param {?} line\r\n         * @return {?}\r\n         */\r\n        function (line) {\r\n            ctx.fillText(line, pt.x + xLinePadding, pt.y);\r\n            pt.y += bodyFontSize + bodySpacing;\r\n        });\r\n        // Before body lines\r\n        ctx.fillStyle = vm.bodyFontColor;\r\n        helpers.each(vm.beforeBody, fillLineOfText);\r\n        xLinePadding = drawColorBoxes && bodyAlign !== 'right'\r\n            ? bodyAlign === 'center' ? (bodyFontSize / 2 + 1) : (bodyFontSize + 2)\r\n            : 0;\r\n        // Draw body lines now\r\n        helpers.each(body, (/**\r\n         * @param {?} bodyItem\r\n         * @param {?} i\r\n         * @return {?}\r\n         */\r\n        function (bodyItem, i) {\r\n            textColor = vm.labelTextColors[i];\r\n            ctx.fillStyle = textColor;\r\n            helpers.each(bodyItem.before, fillLineOfText);\r\n            // Draw Legend-like boxes if needed\r\n            if (drawColorBoxes) {\r\n                // Fill a white rect so that colours merge nicely if the opacity is < 1\r\n                ctx.fillStyle = vm.legendColorBackground;\r\n                ctx.fillRect(colorX, pt.y, bodyFontSize, bodyFontSize);\r\n                // Border\r\n                ctx.lineWidth = 1;\r\n                ctx.strokeStyle = labelColors[i].borderColor;\r\n                ctx.strokeRect(colorX, pt.y, bodyFontSize, bodyFontSize);\r\n                // Inner square\r\n                ctx.fillStyle = labelColors[i].backgroundColor;\r\n                ctx.fillRect(colorX + 1, pt.y + 1, bodyFontSize - 2, bodyFontSize - 2);\r\n                ctx.fillStyle = textColor;\r\n            }\r\n            helpers.each(bodyItem.lines, fillLineOfText);\r\n            helpers.each(bodyItem.after, fillLineOfText);\r\n        }));\r\n        // Reset back to 0 for after body\r\n        xLinePadding = 0;\r\n        // After body lines\r\n        helpers.each(vm.afterBody, fillLineOfText);\r\n        pt.y -= bodySpacing; // Remove last body spacing\r\n    }\r\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: public_api.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * Generated from: ng2-charts.ts\r\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\nexport { BaseChartDirective, ChartsModule, ThemeService, defaultColors, monkeyPatchChartJsLegend, monkeyPatchChartJsTooltip };\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}