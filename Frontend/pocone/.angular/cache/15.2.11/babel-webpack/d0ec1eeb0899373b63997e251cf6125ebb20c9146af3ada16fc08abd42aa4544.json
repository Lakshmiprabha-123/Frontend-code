{"ast":null,"code":"// // import { Component, OnInit } from '@angular/core';\n// // import { ChartDataSets, ChartOptions, ChartType } from 'chart.js';\n// // import { Color, Label } from 'ng2-charts';\n// // import { ProjectService } from '../Services/project.service';// Adjust the import path as needed\nimport { __decorate } from \"tslib\";\n// // @Component({\n// //   selector: 'app-monthly-status',\n// //   templateUrl: './monthly-status.component.html',\n// //   styleUrls: ['./monthly-status.component.css']\n// // })\n// // export class MonthlyStatusComponent implements OnInit {\n// //   projects: any[] = [];\n// //   months: string[] = ['2024-01', '2024-02', '2024-03', '2024-04', '2024-05','2024-06','2024-07','2024-08']; // Example months, adjust as needed\n// //   selectedProjectId: number | null = null;\n// //   selectedMonth: string | null = null;\n// //   lineChartData: ChartDataSets[] = [];\n// //   lineChartLabels: Label[] = [];\n// //   lineChartOptions: ChartOptions = {\n// //     responsive: true,\n// //   };\n// //   lineChartLegend = true;\n// //   lineChartType: ChartType = 'line';\n// //   lineChartPlugins = [];\n// //   constructor(private projectService: ProjectService) {}\n// //   ngOnInit() {\n// //     this.projectService.getAllProjects().subscribe(projects => {\n// //       this.projects = projects;\n// //     });\n// //   }\n// //   onProjectSelect(event: any) {\n// //     this.selectedProjectId = event.target.value;\n// //     this.fetchStatusHistory();\n// //   }\n// //   onMonthSelect(event: any) {\n// //     this.selectedMonth = event.target.value;\n// //     this.fetchStatusHistory();\n// //   }\n// //   fetchStatusHistory() {\n// //     if (this.selectedProjectId && this.selectedMonth) {\n// //       this.projectService.getStatusHistory(this.selectedProjectId, this.selectedMonth).subscribe(statusHistory => {\n// //         this.updateChartData(statusHistory);\n// //       });\n// //     }\n// //   }\n// //   updateChartData(statusHistory: any[]) {\n// //     this.lineChartLabels = statusHistory.map(status => status.date); // Assuming 'date' is a field in your status data\n// //     this.lineChartData = [\n// //       { data: statusHistory.map(status => status.value), label: 'Status' } // Assuming 'value' is the field for status value\n// //     ];\n// //   }\n// // }\n// import { Component, OnInit } from '@angular/core';\n// import { ProjectService } from '../Services/project.service'; // Update the path if necessary\n// import { ChartDataSets, ChartOptions, ChartType } from 'chart.js';\n// import { Color, Label } from 'ng2-charts';\n// @Component({\n//   selector: 'app-monthly-status',\n//   templateUrl: './monthly-status.component.html',\n//   styleUrls: ['./monthly-status.component.css']\n// })\n// export class MonthlyStatusComponent implements OnInit {\n//   projects: any[] = [];\n//   selectedProjectId: number | null = null;\n//   selectedMonth: string = '';\n//   months: string[] = [\n//     '2024-01', '2024-02', '2024-03', '2024-04', '2024-05', \n//     '2024-06', '2024-07', '2024-08', '2024-09', '2024-10', \n//     '2024-11', '2024-12'\n//   ];\n//   lineChartData: ChartDataSets[] = [];\n//   lineChartLabels: Label[] = [];\n//   lineChartOptions: ChartOptions = {\n//     responsive: true,\n//     scales: {\n//       xAxes: [{ \n//         scaleLabel: { display: true, labelString: 'Date' },\n//         ticks: { autoSkip: true, maxRotation: 45 }\n//       }],\n//       yAxes: [{ \n//         scaleLabel: { display: true, labelString: 'Status' }\n//       }]\n//     }\n//   };\n//   lineChartLegend = true;\n//   lineChartType: ChartType = 'line';\n//   lineChartColors: Color[] = [\n//     { borderColor: '#42A5F5', backgroundColor: 'rgba(66, 165, 245, 0.3)' }\n//   ];\n//   constructor(private projectService: ProjectService) { }\n//   ngOnInit() {\n//         this.projectService.getAllProjects().subscribe(projects => {\n//           this.projects = projects;\n//        });\n//       }\n//   onProjectSelect(event: any): void {\n//     this.selectedProjectId = event.target.value;\n//     this.fetchStatusHistory();\n//   }\n//   onMonthSelect(event: any): void {\n//     this.selectedMonth = event.target.value;\n//     this.fetchStatusHistory();\n//   }\n//   fetchStatusHistory(): void {\n//     if (this.selectedProjectId && this.selectedMonth) {\n//       this.projectService.getStatusHistory(this.selectedProjectId, this.selectedMonth).subscribe(statusHistory => {\n//         this.updateChart(statusHistory);\n//       });\n//     }\n//   }\n//   updateChart(statusHistory: any[]): void {\n//     this.lineChartLabels = statusHistory.map(status => status.date);\n//     this.lineChartData = [\n//       {\n//         data: statusHistory.map(status => status.currentStatus),\n//         label: 'Current Status'\n//       }\n//     ];\n//   }\n// }\nimport { Component } from '@angular/core';\nlet StatusLineChartComponent = class StatusLineChartComponent {\n  constructor(projectService) {\n    this.projectService = projectService;\n    this.projects = [];\n  }\n  ngOnInit() {\n    this.loadProjects();\n  }\n  loadProjects() {\n    this.projectService.getProjects().subscribe(projects => {\n      this.projects = projects;\n    });\n  }\n  onProjectSelect(event) {\n    this.selectedProject = +event.target.value;\n    this.loadStatusHistory();\n  }\n  onMonthChange(event) {\n    this.selectedMonth = event.target.value;\n    this.loadStatusHistory();\n  }\n  loadStatusHistory() {\n    if (this.selectedProject && this.selectedMonth) {\n      this.projectService.getStatusHistory(this.selectedProject, this.selectedMonth).subscribe(data => {\n        this.updateChart(data);\n      });\n    }\n  }\n  updateChart(data) {\n    const labels = data.map(entry => new Date(entry[5]).toLocaleDateString()); // Adjust index based on data structure\n    const statusData = data.map(entry => entry[6]); // Adjust index based on data structure\n    if (this.chart) {\n      this.chart.destroy();\n    }\n    this.chart = new Chart('lineChart', {\n      type: 'line',\n      data: {\n        labels: labels,\n        datasets: [{\n          label: 'Current Status',\n          data: statusData,\n          fill: false,\n          borderColor: 'blue',\n          tension: 0.1\n        }]\n      },\n      options: {\n        responsive: true,\n        scales: {\n          x: {\n            title: {\n              display: true,\n              text: 'Date'\n            }\n          },\n          y: {\n            title: {\n              display: true,\n              text: 'Status'\n            },\n            suggestedMin: 0,\n            suggestedMax: 5\n          }\n        }\n      }\n    });\n  }\n};\nStatusLineChartComponent = __decorate([Component({\n  selector: 'app-status-line-chart',\n  templateUrl: './status-line-chart.component.html',\n  styleUrls: ['./status-line-chart.component.css']\n})], StatusLineChartComponent);\nexport { StatusLineChartComponent };","map":{"version":3,"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,SAAS,QAAgB,eAAe;AAU1C,IAAMC,wBAAwB,GAA9B,MAAMA,wBAAwB;EAMnCC,YAAoBC,cAA8B;IAA9B,mBAAc,GAAdA,cAAc;IALlC,aAAQ,GAAG,EAAE;EAKwC;EAErDC,QAAQ;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAA,YAAY;IACV,IAAI,CAACF,cAAc,CAACG,WAAW,EAAE,CAACC,SAAS,CAAEC,QAAe,IAAI;MAC9D,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IAC1B,CAAC,CAAC;EACJ;EAEAC,eAAe,CAACC,KAAY;IAC1B,IAAI,CAACC,eAAe,GAAG,CAAED,KAAK,CAACE,MAA4B,CAACC,KAAK;IACjE,IAAI,CAACC,iBAAiB,EAAE;EAC1B;EAEAC,aAAa,CAACL,KAAY;IACxB,IAAI,CAACM,aAAa,GAAIN,KAAK,CAACE,MAA2B,CAACC,KAAK;IAC7D,IAAI,CAACC,iBAAiB,EAAE;EAC1B;EAEAA,iBAAiB;IACf,IAAI,IAAI,CAACH,eAAe,IAAI,IAAI,CAACK,aAAa,EAAE;MAC9C,IAAI,CAACb,cAAc,CAACc,gBAAgB,CAAC,IAAI,CAACN,eAAe,EAAE,IAAI,CAACK,aAAa,CAAC,CAACT,SAAS,CAACW,IAAI,IAAG;QAC9F,IAAI,CAACC,WAAW,CAACD,IAAI,CAAC;MACxB,CAAC,CAAC;;EAEN;EAEAC,WAAW,CAACD,IAAW;IACrB,MAAME,MAAM,GAAGF,IAAI,CAACG,GAAG,CAACC,KAAK,IAAI,IAAIC,IAAI,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAACE,kBAAkB,EAAE,CAAC,CAAC,CAAC;IAC3E,MAAMC,UAAU,GAAGP,IAAI,CAACG,GAAG,CAACC,KAAK,IAAIA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAEhD,IAAI,IAAI,CAACI,KAAK,EAAE;MACd,IAAI,CAACA,KAAK,CAACC,OAAO,EAAE;;IAGtB,IAAI,CAACD,KAAK,GAAG,IAAIE,KAAK,CAAC,WAAW,EAAE;MAClCC,IAAI,EAAE,MAAM;MACZX,IAAI,EAAE;QACJE,MAAM,EAAEA,MAAM;QACdU,QAAQ,EAAE,CACR;UACEC,KAAK,EAAE,gBAAgB;UACvBb,IAAI,EAAEO,UAAU;UAChBO,IAAI,EAAE,KAAK;UACXC,WAAW,EAAE,MAAM;UACnBC,OAAO,EAAE;SACV;OAEJ;MACDC,OAAO,EAAE;QACPC,UAAU,EAAE,IAAI;QAChBC,MAAM,EAAE;UACNC,CAAC,EAAE;YACDC,KAAK,EAAE;cACLC,OAAO,EAAE,IAAI;cACbC,IAAI,EAAE;;WAET;UACDC,CAAC,EAAE;YACDH,KAAK,EAAE;cACLC,OAAO,EAAE,IAAI;cACbC,IAAI,EAAE;aACP;YACDE,YAAY,EAAE,CAAC;YACfC,YAAY,EAAE;;;;KAIrB,CAAC;EACJ;CACD;AA/EY3C,wBAAwB,eALpCD,SAAS,CAAC;EACT6C,QAAQ,EAAE,uBAAuB;EACjCC,WAAW,EAAE,oCAAoC;EACjDC,SAAS,EAAE,CAAC,mCAAmC;CAChD,CAAC,GACW9C,wBAAwB,CA+EpC;SA/EYA,wBAAwB","names":["Component","StatusLineChartComponent","constructor","projectService","ngOnInit","loadProjects","getProjects","subscribe","projects","onProjectSelect","event","selectedProject","target","value","loadStatusHistory","onMonthChange","selectedMonth","getStatusHistory","data","updateChart","labels","map","entry","Date","toLocaleDateString","statusData","chart","destroy","Chart","type","datasets","label","fill","borderColor","tension","options","responsive","scales","x","title","display","text","y","suggestedMin","suggestedMax","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/decodersmdu/pocone/src/app/monthly-status/monthly-status.component.ts"],"sourcesContent":["// // import { Component, OnInit } from '@angular/core';\n// // import { ChartDataSets, ChartOptions, ChartType } from 'chart.js';\n// // import { Color, Label } from 'ng2-charts';\n// // import { ProjectService } from '../Services/project.service';// Adjust the import path as needed\n\n// // @Component({\n// //   selector: 'app-monthly-status',\n// //   templateUrl: './monthly-status.component.html',\n// //   styleUrls: ['./monthly-status.component.css']\n// // })\n// // export class MonthlyStatusComponent implements OnInit {\n// //   projects: any[] = [];\n// //   months: string[] = ['2024-01', '2024-02', '2024-03', '2024-04', '2024-05','2024-06','2024-07','2024-08']; // Example months, adjust as needed\n// //   selectedProjectId: number | null = null;\n// //   selectedMonth: string | null = null;\n\n// //   lineChartData: ChartDataSets[] = [];\n// //   lineChartLabels: Label[] = [];\n// //   lineChartOptions: ChartOptions = {\n// //     responsive: true,\n// //   };\n// //   lineChartLegend = true;\n// //   lineChartType: ChartType = 'line';\n// //   lineChartPlugins = [];\n\n// //   constructor(private projectService: ProjectService) {}\n\n// //   ngOnInit() {\n// //     this.projectService.getAllProjects().subscribe(projects => {\n// //       this.projects = projects;\n// //     });\n// //   }\n\n// //   onProjectSelect(event: any) {\n// //     this.selectedProjectId = event.target.value;\n// //     this.fetchStatusHistory();\n// //   }\n\n// //   onMonthSelect(event: any) {\n// //     this.selectedMonth = event.target.value;\n// //     this.fetchStatusHistory();\n// //   }\n\n// //   fetchStatusHistory() {\n// //     if (this.selectedProjectId && this.selectedMonth) {\n// //       this.projectService.getStatusHistory(this.selectedProjectId, this.selectedMonth).subscribe(statusHistory => {\n// //         this.updateChartData(statusHistory);\n// //       });\n// //     }\n// //   }\n\n// //   updateChartData(statusHistory: any[]) {\n// //     this.lineChartLabels = statusHistory.map(status => status.date); // Assuming 'date' is a field in your status data\n// //     this.lineChartData = [\n// //       { data: statusHistory.map(status => status.value), label: 'Status' } // Assuming 'value' is the field for status value\n// //     ];\n// //   }\n// // }\n// import { Component, OnInit } from '@angular/core';\n// import { ProjectService } from '../Services/project.service'; // Update the path if necessary\n// import { ChartDataSets, ChartOptions, ChartType } from 'chart.js';\n// import { Color, Label } from 'ng2-charts';\n\n// @Component({\n//   selector: 'app-monthly-status',\n//   templateUrl: './monthly-status.component.html',\n//   styleUrls: ['./monthly-status.component.css']\n// })\n// export class MonthlyStatusComponent implements OnInit {\n//   projects: any[] = [];\n//   selectedProjectId: number | null = null;\n//   selectedMonth: string = '';\n//   months: string[] = [\n//     '2024-01', '2024-02', '2024-03', '2024-04', '2024-05', \n//     '2024-06', '2024-07', '2024-08', '2024-09', '2024-10', \n//     '2024-11', '2024-12'\n//   ];\n  \n//   lineChartData: ChartDataSets[] = [];\n//   lineChartLabels: Label[] = [];\n//   lineChartOptions: ChartOptions = {\n//     responsive: true,\n//     scales: {\n//       xAxes: [{ \n//         scaleLabel: { display: true, labelString: 'Date' },\n//         ticks: { autoSkip: true, maxRotation: 45 }\n//       }],\n//       yAxes: [{ \n//         scaleLabel: { display: true, labelString: 'Status' }\n//       }]\n//     }\n//   };\n//   lineChartLegend = true;\n//   lineChartType: ChartType = 'line';\n//   lineChartColors: Color[] = [\n//     { borderColor: '#42A5F5', backgroundColor: 'rgba(66, 165, 245, 0.3)' }\n//   ];\n\n//   constructor(private projectService: ProjectService) { }\n\n//   ngOnInit() {\n//         this.projectService.getAllProjects().subscribe(projects => {\n//           this.projects = projects;\n//        });\n//       }\n\n//   onProjectSelect(event: any): void {\n//     this.selectedProjectId = event.target.value;\n//     this.fetchStatusHistory();\n//   }\n\n//   onMonthSelect(event: any): void {\n//     this.selectedMonth = event.target.value;\n//     this.fetchStatusHistory();\n//   }\n\n//   fetchStatusHistory(): void {\n//     if (this.selectedProjectId && this.selectedMonth) {\n//       this.projectService.getStatusHistory(this.selectedProjectId, this.selectedMonth).subscribe(statusHistory => {\n//         this.updateChart(statusHistory);\n//       });\n//     }\n//   }\n\n//   updateChart(statusHistory: any[]): void {\n//     this.lineChartLabels = statusHistory.map(status => status.date);\n//     this.lineChartData = [\n//       {\n//         data: statusHistory.map(status => status.currentStatus),\n//         label: 'Current Status'\n//       }\n//     ];\n//   }\n// }\nimport { Component, OnInit } from '@angular/core';\n// import { ProjectService } from '../Services/project.service'; // Update the path if necessary\n import { ChartDataSets, ChartOptions, ChartType } from 'chart.js';\n import { Color, Label } from 'ng2-charts';\n\n@Component({\n  selector: 'app-status-line-chart',\n  templateUrl: './status-line-chart.component.html',\n  styleUrls: ['./status-line-chart.component.css']\n})\nexport class StatusLineChartComponent implements OnInit {\n  projects = [];\n  selectedProject: number;\n  selectedMonth: string;\n  chart: Chart | undefined;\n\n  constructor(private projectService: ProjectService) {}\n\n  ngOnInit(): void {\n    this.loadProjects();\n  }\n\n  loadProjects(): void {\n    this.projectService.getProjects().subscribe((projects: any[]) => {\n      this.projects = projects;\n    });\n  }\n\n  onProjectSelect(event: Event): void {\n    this.selectedProject = +(event.target as HTMLSelectElement).value;\n    this.loadStatusHistory();\n  }\n\n  onMonthChange(event: Event): void {\n    this.selectedMonth = (event.target as HTMLInputElement).value;\n    this.loadStatusHistory();\n  }\n\n  loadStatusHistory(): void {\n    if (this.selectedProject && this.selectedMonth) {\n      this.projectService.getStatusHistory(this.selectedProject, this.selectedMonth).subscribe(data => {\n        this.updateChart(data);\n      });\n    }\n  }\n\n  updateChart(data: any[]): void {\n    const labels = data.map(entry => new Date(entry[5]).toLocaleDateString()); // Adjust index based on data structure\n    const statusData = data.map(entry => entry[6]); // Adjust index based on data structure\n\n    if (this.chart) {\n      this.chart.destroy();\n    }\n\n    this.chart = new Chart('lineChart', {\n      type: 'line',\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: 'Current Status',\n            data: statusData,\n            fill: false,\n            borderColor: 'blue',\n            tension: 0.1\n          }\n        ]\n      },\n      options: {\n        responsive: true,\n        scales: {\n          x: {\n            title: {\n              display: true,\n              text: 'Date'\n            }\n          },\n          y: {\n            title: {\n              display: true,\n              text: 'Status'\n            },\n            suggestedMin: 0,\n            suggestedMax: 5\n          }\n        }\n      }\n    });\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}